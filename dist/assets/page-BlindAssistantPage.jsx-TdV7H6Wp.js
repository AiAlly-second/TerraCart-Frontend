import{u as M,r as n,j as t}from"./vendor-react-ObuVvEbY.js";import{g as B,s as F}from"./page-Billing.jsx-e1iYcKyK.js";import"./vendor-BzqibXkm.js";import"./vendor-motion-PmperX3c.js";/* empty css                         */const K="/assets/disabled-sign-DmuCn7Xp.png",D={voiceNotSupported:"Voice recognition is not supported on this device.",voiceNotAvailable:"Voice recognition is not available on this device.",noted:"Noted.",micPermissionDenied:"Microphone permission denied. Please allow microphone access.",voiceCaptureFailed:"We could not capture your voice. Please try again.",unableStartListening:"Unable to start listening. Please try again.",initialGreeting:"Voice assistant activated. Press Start Listening and speak slowly. Your words will appear on the screen for staff to read.",copied:"Copied to clipboard.",copiedAlert:"Copied to clipboard.",copyFailed:"Unable to copy. Please copy manually.",clearedNotes:"Cleared notes.",listeningPaused:"Listening paused.",listeningResumed:"Listening resumed.",blindSupportAlt:"Blind Support",voiceAssistantTitle:"Voice Assistant",blindSupportMode:"Blind Support Mode",closeAria:"Close voice assistant",closeExit:"Close / Exit",listening:"Listening...",paused:"Paused",tableLabel:"Table",transcriptAria:"Voice to text transcripts",emptyPromptLine1:"Tap Start Listening and speak.",emptyPromptLine2:"Your voice will be converted to text.",pauseListening:"Pause Listening",startListening:"Start Listening",copyNotes:"Copy Notes",clearNotes:"Clear Notes",footerNote:"This tool converts speech to text to assist with communication."},z={voiceNotSupported:"Is device par voice recognition support nahi hai.",voiceNotAvailable:"Is device par voice recognition available nahi hai.",noted:"Note kar liya.",micPermissionDenied:"Microphone permission deny ho gayi. Kripya microphone access allow karein.",voiceCaptureFailed:"Aapki awaaz capture nahi ho payi. Kripya dobara try karein.",unableStartListening:"Listening start nahi ho pa raha. Kripya dobara try karein.",initialGreeting:"Voice assistant chalu ho gaya hai. Start Listening dabaiye aur dheere boliye. Aapki baat screen par text me dikhai degi.",copied:"Clipboard me copy ho gaya.",copiedAlert:"Clipboard me copy ho gaya.",copyFailed:"Copy nahi ho paaya. Kripya manually copy karein.",clearedNotes:"Notes clear kar diye gaye.",listeningPaused:"Listening pause kar diya gaya.",listeningResumed:"Listening fir se chalu ho gaya.",blindSupportAlt:"Blind Support",voiceAssistantTitle:"Voice Assistant",blindSupportMode:"Blind Support Mode",closeAria:"Voice assistant band karein",closeExit:"Close / Exit",listening:"Sun raha hai...",paused:"Ruka hua",tableLabel:"Table",transcriptAria:"Voice se text transcripts",emptyPromptLine1:"Start Listening dabaiye aur boliye.",emptyPromptLine2:"Aapki awaaz text me convert hogi.",pauseListening:"Listening Pause",startListening:"Listening Start",copyNotes:"Notes Copy",clearNotes:"Notes Clear",footerNote:"Yeh tool speech ko text me convert karta hai taaki communication asaan ho."},Y={voiceNotSupported:"Ya device var voice recognition support nahi.",voiceNotAvailable:"Ya device var voice recognition upalabdh nahi.",noted:"Nond keli.",micPermissionDenied:"Microphone permission nakarli geli. Krupaya microphone access dya.",voiceCaptureFailed:"Tumcha awaz capture karta ala nahi. Krupaya punha prayatna kara.",unableStartListening:"Listening suru karta yet nahi. Krupaya punha prayatna kara.",initialGreeting:"Voice assistant suru jhala aahe. Start Listening daba ani halue bola. Tumcha awaz screen var text madhe disel.",copied:"Clipboard var copy jhale.",copiedAlert:"Clipboard var copy jhale.",copyFailed:"Copy karta ala nahi. Krupaya manually copy kara.",clearedNotes:"Notes clear kele.",listeningPaused:"Listening pause kele.",listeningResumed:"Listening punha suru kele.",blindSupportAlt:"Blind Support",voiceAssistantTitle:"Voice Assistant",blindSupportMode:"Blind Support Mode",closeAria:"Voice assistant band kara",closeExit:"Close / Exit",listening:"Aikat aahe...",paused:"Thambalele",tableLabel:"Table",transcriptAria:"Voice to text transcripts",emptyPromptLine1:"Start Listening daba ani bola.",emptyPromptLine2:"Tumcha awaz text madhe badlel.",pauseListening:"Listening Pause",startListening:"Listening Start",copyNotes:"Notes Copy",clearNotes:"Notes Clear",footerNote:"He tool speech la text madhe convert karte, communication sathi upyogi aahe."},G={voiceNotSupported:"Aa device par voice recognition support nathi.",voiceNotAvailable:"Aa device par voice recognition available nathi.",noted:"Nondh kari lidhu.",micPermissionDenied:"Microphone permission deny thai gayi. Krupaya microphone access allow karo.",voiceCaptureFailed:"Tamaro voice capture thai shakyo nathi. Krupaya fari prayatna karo.",unableStartListening:"Listening start thai shakatu nathi. Krupaya fari prayatna karo.",initialGreeting:"Voice assistant chalu chhe. Start Listening dabavo ane dhime bolo. Tamara shabdo screen par text tariqe dekhashe.",copied:"Clipboard ma copy thai gayu.",copiedAlert:"Clipboard ma copy thai gayu.",copyFailed:"Copy thai shakyu nathi. Krupaya manually copy karo.",clearedNotes:"Notes clear kari didha.",listeningPaused:"Listening pause karayu.",listeningResumed:"Listening fari chalu karayu.",blindSupportAlt:"Blind Support",voiceAssistantTitle:"Voice Assistant",blindSupportMode:"Blind Support Mode",closeAria:"Voice assistant bandh karo",closeExit:"Close / Exit",listening:"Sambhli rahyu chhe...",paused:"Rokayelu",tableLabel:"Table",transcriptAria:"Voice to text transcripts",emptyPromptLine1:"Start Listening dabavo ane bolo.",emptyPromptLine2:"Tamaro voice text ma convert thashe.",pauseListening:"Listening Pause",startListening:"Listening Start",copyNotes:"Notes Copy",clearNotes:"Notes Clear",footerNote:"Aa tool speech ne text ma convert kare chhe jethi communication asaan bane."},C={en:D,hi:z,mr:Y,gu:G},A={hi:{recognition:"hi-IN",speech:"hi-IN"},mr:{recognition:"mr-IN",speech:"mr-IN"},gu:{recognition:"gu-IN",speech:"gu-IN"},en:{recognition:"en-IN",speech:"en-IN"}},W={minHeight:"100vh",background:"#f1f5f9",display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",paddingTop:"80px"},U={width:"min(720px, 100%)",background:"#ffffff",borderRadius:"18px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",display:"flex",flexDirection:"column",padding:"24px",border:"1px solid #e2e8f0"},$={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},q={height:"300px",overflowY:"auto",border:"1px solid #e2e8f0",borderRadius:"12px",padding:"16px",background:"#f8fafc",marginBottom:"16px"},H={display:"flex",flexWrap:"wrap",gap:"12px",marginTop:"16px",justifyContent:"center"},j={display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 12px",borderRadius:"9999px",background:"#e0f2fe",color:"#0c4a6e",fontWeight:600,fontSize:"0.875rem",marginBottom:"12px"},y=(p="secondary")=>{const s="px-6 py-3 rounded-xl font-bold focus:outline-none focus:ring transition transform active:scale-95 shadow-sm";switch(p){case"primary":return`${s} bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-200`;case"danger":return`${s} bg-red-500 text-white hover:bg-red-600 focus:ring-red-200`;default:return`${s} bg-slate-200 text-slate-700 hover:bg-slate-300 focus:ring-slate-200`}},c=(p,s="en-IN")=>{if(typeof window>"u"||!("speechSynthesis"in window)||!p)return;const l=new SpeechSynthesisUtterance(p);l.lang=s,l.rate=.95,l.pitch=1,window.speechSynthesis.cancel(),window.speechSynthesis.speak(l)};function Z(){const p=M(),[s,l]=n.useState([]),[m,u]=n.useState(!1),[S,g]=n.useState(""),[f,P]=n.useState(B()),e=a=>C[f]?.[a]||C.en?.[a]||a,v=n.useRef(null),d=n.useRef(null),L=n.useRef(!1);n.useEffect(()=>F(i=>{P(i)}),[]);const{recognition:k,speech:r}=n.useMemo(()=>A[f]||A.en,[f]),w=n.useMemo(()=>{try{const a=localStorage.getItem("terra_selectedTable")||localStorage.getItem("tableSelection"),i=a?JSON.parse(a):null;if(i)return i;const o=localStorage.getItem("terra_scanToken");return o?{qrSlug:o}:null}catch{return null}},[]),b=n.useCallback(()=>{if(L.current=!1,d.current){try{d.current.onresult=null,d.current.onend=null,d.current.stop()}catch(a){console.warn("Voice assistant stop error",a)}d.current=null}u(!1)},[]),T=n.useCallback(()=>{if(typeof window>"u")return;const a=window.SpeechRecognition||window.webkitSpeechRecognition;if(!a){g(e("voiceNotSupported")),c(e("voiceNotAvailable"),r);return}g("");const i=new a;i.lang=k,i.continuous=!0,i.interimResults=!1,i.maxAlternatives=3,L.current=!0,i.onresult=o=>{let N="";for(let h=o.resultIndex;h<o.results.length;h+=1){const x=o.results[h];x.isFinal&&(N=x[0].transcript.trim())}if(N){const h=new Date().toLocaleTimeString();l(x=>[...x,{id:Date.now(),text:N,timestamp:h}]),c(e("noted"),r)}},i.onerror=o=>{console.error("Voice assistant error",o.error),g(o.error==="not-allowed"?e("micPermissionDenied"):e("voiceCaptureFailed")),u(!1)},i.onend=()=>{u(!1)};try{i.start(),u(!0),g(""),d.current=i}catch(o){console.error("Voice assistant start error",o),g(e("unableStartListening")),u(!1)}},[k,r,e]);n.useEffect(()=>(c(e("initialGreeting"),r),()=>{b()}),[r,b,e]),n.useEffect(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth"})},[s]);const R=()=>{b(),p(-1)},I=async()=>{try{const a=s.map(i=>i.text).join(`
`);if(!a)return;await navigator.clipboard.writeText(a),c(e("copied"),r),alert(e("copiedAlert"))}catch{alert(e("copyFailed"))}},V=()=>{l([]),c(e("clearedNotes"),r)},E=()=>{m?(b(),c(e("listeningPaused"),r)):(T(),c(e("listeningResumed"),r))};return t.jsxs("div",{style:W,children:[t.jsxs("div",{style:U,children:[t.jsxs("div",{style:$,children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("img",{src:K,alt:e("blindSupportAlt"),style:{width:"32px",height:"32px",objectFit:"contain"}}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:e("voiceAssistantTitle")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("blindSupportMode")})]})]}),t.jsx("button",{className:y("danger"),onClick:R,"aria-label":e("closeAria"),style:{padding:"8px 16px",fontSize:"0.9rem"},children:e("closeExit")})]}),t.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:"16px"},children:[t.jsxs("div",{style:j,children:[t.jsx("span",{style:{width:12,height:12,borderRadius:"50%",background:m?"#22c55e":"#f97316",display:"inline-block"}}),e(m?"listening":"paused")]}),w?.number&&t.jsxs("div",{style:{...j,background:"#ecfeff",color:"#0e7490"},children:[e("tableLabel")," ",w.number]})]}),S&&t.jsx("div",{className:"mb-4 px-4 py-3 rounded-lg bg-red-50 text-red-600 text-sm border border-red-100",children:S}),t.jsxs("div",{style:q,"aria-live":"polite","aria-label":e("transcriptAria"),children:[s.length===0&&t.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400 text-center p-4",children:[t.jsx("p",{className:"mb-2 text-3xl",children:"MIC"}),t.jsx("p",{children:e("emptyPromptLine1")}),t.jsx("p",{className:"text-sm mt-2",children:e("emptyPromptLine2")})]}),s.map(a=>t.jsxs("div",{className:"mb-3 rounded-lg bg-white shadow-sm border border-slate-200 p-3 text-slate-800",children:[t.jsx("div",{className:"text-xs text-slate-400 mb-1",children:a.timestamp}),t.jsx("div",{className:"text-lg leading-relaxed",children:a.text})]},a.id)),t.jsx("div",{ref:v})]}),t.jsxs("div",{style:H,children:[t.jsx("button",{className:y("primary"),onClick:E,style:{minWidth:"160px"},children:e(m?"pauseListening":"startListening")}),t.jsx("button",{className:y(),onClick:I,disabled:!s.length,children:e("copyNotes")}),t.jsx("button",{className:y(),onClick:V,disabled:!s.length,children:e("clearNotes")})]})]}),t.jsx("p",{className:"text-slate-500 text-sm mt-8 text-center max-w-md",children:e("footerNote")})]})}export{Z as default};
