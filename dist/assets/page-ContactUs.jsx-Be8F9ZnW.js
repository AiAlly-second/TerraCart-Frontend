import{u as U,c as R,f as T,r as m,j as t}from"./vendor-react-BMxAjtiD.js";import{r as _,H as P}from"./page-Billing.jsx-CXD1st4q.js";import"./vendor-CB8mghnX.js";import"./vendor-motion-iT52ZrD2.js";/* empty css                         */const j="https://api.terracart.in".replace(/\/$/,""),f=e=>e?typeof e=="string"?e:String(typeof e=="object"?e._id||e.id||"":e):"",J=()=>{try{const e=localStorage.getItem("terra_selectedTable");return e?JSON.parse(e):null}catch{return null}};function A(){const e=U(),l=R(),[x]=T(),[u,I]=m.useState(!0),[p,y]=m.useState(""),[b,N]=m.useState(l.state?.contact||null);m.useEffect(()=>{let o=!1;const E=async()=>{const a=f(l.state?.cartId);if(a)return a;const r=x.get("cartId");if(r)return r;const n=localStorage.getItem("terra_selectedCartId");if(n)return n;const s=localStorage.getItem("terra_takeaway_cartId");if(s)return s;const d=J(),w=f(d?.cartId||d?.cafeId);if(w)return w;const k=f(d?.id||d?._id);if(k)try{const c=await fetch(`${j}/api/tables/public-cart-id/${encodeURIComponent(k)}`);if(c.ok){const i=await c.json().catch(()=>({}));if(i?.success&&i?.cartId)return String(i.cartId)}}catch{}const C=x.get("table"),S=localStorage.getItem("terra_sessionToken")||"";if(!C)return"";try{const c=await fetch(`${j}/api/tables/lookup/${encodeURIComponent(C)}${S?`?sessionToken=${encodeURIComponent(S)}`:""}`);if(!c.ok)return"";const v=(await c.json().catch(()=>({})))?.table||null,$=f(v?.cartId||v?.cafeId);return $||""}catch{return""}};return(async()=>{I(!0),y("");try{const a=l.state?.contact||null,r=await E();if(!r&&a){o||N(a);return}if(!r)throw new Error("Unable to find store context. Please open Contact Us from Menu page.");const n=await fetch(`${j}/api/carts/public-contact?cartId=${encodeURIComponent(r)}`),s=await n.json().catch(()=>({}));if(!n.ok||!s?.success)throw new Error(s?.message||"Failed to load contact details.");o||N(s?.data||null)}catch(a){o||y(a.message||"Failed to load contact details.")}finally{o||I(!1)}})(),()=>{o=!0}},[l.state,x]);const g=b?.contactPhone||"",h=b?.contactEmail||"";return t.jsxs("div",{className:"relative min-h-screen",children:[t.jsx("div",{className:"fixed inset-0 bg-cover bg-center",style:{backgroundImage:`url(${_})`}}),t.jsx("div",{className:"fixed inset-0 bg-black/40"}),t.jsx(P,{showNavigationTabs:!1}),t.jsx("main",{className:"relative z-10 px-4 pt-24 pb-24",children:t.jsxs("div",{className:"mx-auto max-w-md rounded-2xl border border-white/30 bg-white/95 p-6 shadow-xl",children:[t.jsx("h1",{className:"text-2xl font-bold text-[#4a2e1f]",children:"Contact Us"}),t.jsx("p",{className:"mt-1 text-sm text-[#6b4a35]",children:b?.name||"Store Support"}),u&&t.jsx("p",{className:"mt-6 text-sm text-gray-600",children:"Loading contact details..."}),!u&&p&&t.jsx("p",{className:"mt-6 rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700",children:p}),!u&&!p&&t.jsxs("div",{className:"mt-6 space-y-4",children:[t.jsxs("div",{className:"rounded-lg border border-[#ead7c9] bg-[#fff8f2] p-4",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#8a5d42]",children:"Phone"}),t.jsx("p",{className:"mt-1 text-base font-medium text-[#3f2a1e]",children:g||"Not provided"})]}),t.jsxs("div",{className:"rounded-lg border border-[#ead7c9] bg-[#fff8f2] p-4",children:[t.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#8a5d42]",children:"Email"}),t.jsx("p",{className:"mt-1 text-base font-medium text-[#3f2a1e]",children:h||"Not provided"})]}),t.jsxs("div",{className:"flex gap-3 pt-2",children:[g?t.jsx("a",{href:`tel:${g.replace(/\s/g,"")}`,className:"flex-1 rounded-lg bg-[#d86d2a] px-4 py-2 text-center text-sm font-semibold text-white hover:bg-[#c75b1a]",children:"Call"}):t.jsx("button",{type:"button",disabled:!0,className:"flex-1 cursor-not-allowed rounded-lg bg-gray-300 px-4 py-2 text-sm font-semibold text-gray-600",children:"Call"}),h?t.jsx("a",{href:`mailto:${h}`,className:"flex-1 rounded-lg border border-[#d86d2a] px-4 py-2 text-center text-sm font-semibold text-[#d86d2a] hover:bg-[#fff1e8]",children:"Email"}):t.jsx("button",{type:"button",disabled:!0,className:"flex-1 cursor-not-allowed rounded-lg border border-gray-300 px-4 py-2 text-sm font-semibold text-gray-500",children:"Email"})]})]}),t.jsx("button",{type:"button",onClick:()=>e(-1),className:"mt-6 w-full rounded-lg border border-[#c8aa95] px-4 py-2 text-sm font-semibold text-[#5a3a27] hover:bg-[#f6e7db]",children:"Back"})]})})]})}export{A as default};
