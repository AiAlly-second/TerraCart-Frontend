import{u as Z,c as ee,r,j as e,k as ae}from"./vendor-react-ObuVvEbY.js";import{g as te,s as re,r as E,H as O}from"./page-Billing.jsx-hhBSIzyM.js";/* empty css                              */import"./vendor-BzqibXkm.js";import"./vendor-motion-PmperX3c.js";/* empty css                         */const ie={alreadySubmittedError:"Feedback already submitted for this order.",overallRatingRequired:"Please provide an overall rating.",submitFailed:"Failed to submit feedback.",genericError:"Something went wrong. Please try again.",restaurantAlt:"Restaurant",thankYouTitle:"Thank You!",feedbackSubmittedMessage:"Your feedback has been submitted successfully. We appreciate your time!",redirectMessage:"Redirecting to main page...",shareFeedbackTitle:"Share Your Feedback",shareFeedbackSubtitle:"We value your opinion!",overallExperienceTitle:"How was your experience? *",foodQualityTitle:"Food Quality",serviceQualityTitle:"Service Quality",commentsLabel:"Comments (Optional)",commentsPlaceholder:"Tell us what you liked or how we can improve...",yourInfoTitle:"Your Information (Optional)",yourInfoSubtitle:"Help us track your visits and improve your experience.",nameLabel:"Name (Optional)",namePlaceholder:"Enter your name",phoneLabel:"Phone Number (Optional)",phonePlaceholder:"Enter your phone number",phoneHelper:"We'll use this to track your visit history and provide better service.",emailLabel:"Email (Optional)",emailPlaceholder:"Enter your email address",emailHelper:"Optional - helps us match your previous visits.",skipButton:"Skip",feedbackSubmittedButton:"Feedback Submitted",submittingButton:"Submitting...",submitButton:"Submit Feedback"},se={alreadySubmittedError:"Is order ke liye feedback pehle se submit ho chuka hai.",overallRatingRequired:"Kripya overall rating dein.",submitFailed:"Feedback submit nahi ho paya.",genericError:"Kuch galat ho gaya. Kripya dobara try karein.",restaurantAlt:"Restaurant",thankYouTitle:"Dhanyavaad!",feedbackSubmittedMessage:"Aapka feedback safalta se submit ho gaya. Aapke samay ke liye dhanyavaad!",redirectMessage:"Main page par redirect kiya ja raha hai...",shareFeedbackTitle:"Apna Feedback Share karein",shareFeedbackSubtitle:"Aapki rai hamare liye mahatvapurn hai!",overallExperienceTitle:"Aapka anubhav kaisa raha? *",foodQualityTitle:"Khaane ki Quality",serviceQualityTitle:"Service Quality",commentsLabel:"Comments (Optional)",commentsPlaceholder:"Batayiye aapko kya pasand aaya ya hum kya improve karein...",yourInfoTitle:"Aapki Jaankari (Optional)",yourInfoSubtitle:"Aapki visits track karne aur experience improve karne mein madad milegi.",nameLabel:"Naam (Optional)",namePlaceholder:"Apna naam likhein",phoneLabel:"Phone Number (Optional)",phonePlaceholder:"Apna phone number likhein",phoneHelper:"Isse hum aapki visit history track karke better service de sakte hain.",emailLabel:"Email (Optional)",emailPlaceholder:"Apna email address likhein",emailHelper:"Optional - aapki purani visits match karne mein madad karta hai.",skipButton:"Skip",feedbackSubmittedButton:"Feedback Submit ho chuka hai",submittingButton:"Submit ho raha hai...",submitButton:"Feedback Submit karein"},le={alreadySubmittedError:"Ya order sathi feedback adhich submit zala aahe.",overallRatingRequired:"Krupaya overall rating dya.",submitFailed:"Feedback submit karta ala nahi.",genericError:"Kahi tari chuk jhali. Krupaya punha prayatna kara.",restaurantAlt:"Restaurant",thankYouTitle:"Dhanyavad!",feedbackSubmittedMessage:"Tumcha feedback yashasvipane submit zala. Tumchya velesathi dhanyavad!",redirectMessage:"Main page var redirect hot aahe...",shareFeedbackTitle:"Tumcha Feedback Share kara",shareFeedbackSubtitle:"Tumchi mate aamchya sathi mahatvachi ahet!",overallExperienceTitle:"Tumcha anubhav kasa hota? *",foodQualityTitle:"Jevanachi Quality",serviceQualityTitle:"Service Quality",commentsLabel:"Comments (Optional)",commentsPlaceholder:"Tumhala kay avadle kiwa amhi kay improve karu shakto te sanga...",yourInfoTitle:"Tumchi Mahiti (Optional)",yourInfoSubtitle:"Tumchya visits track karayla ani tumcha anubhav sudharayla madat hote.",nameLabel:"Nav (Optional)",namePlaceholder:"Tumche nav taka",phoneLabel:"Phone Number (Optional)",phonePlaceholder:"Tumcha phone number taka",phoneHelper:"Yamule amhala tumchi visit history track karun changli service denyas madat hote.",emailLabel:"Email (Optional)",emailPlaceholder:"Tumcha email address taka",emailHelper:"Optional - tumchya adichya visits match karayla madat hote.",skipButton:"Skip",feedbackSubmittedButton:"Feedback submit zala",submittingButton:"Submit hot aahe...",submitButton:"Feedback Submit kara"},oe={alreadySubmittedError:"Aa order mate feedback pehla thi submit thai chukyu chhe.",overallRatingRequired:"Krupaya overall rating aapo.",submitFailed:"Feedback submit thai shakyo nathi.",genericError:"Kai galat thayu. Krupaya fari prayatna karo.",restaurantAlt:"Restaurant",thankYouTitle:"Aabhar!",feedbackSubmittedMessage:"Tamaru feedback safalta thi submit thai gayu. Tamaro samay aapva badal aabhar!",redirectMessage:"Main page par redirect thai rahyu chhe...",shareFeedbackTitle:"Tamaru Feedback Share karo",shareFeedbackSubtitle:"Tamaro abhipray amara mate khub mahatvapurna chhe!",overallExperienceTitle:"Tamaro anubhav kevo rahyo? *",foodQualityTitle:"Food Quality",serviceQualityTitle:"Service Quality",commentsLabel:"Comments (Optional)",commentsPlaceholder:"Tamne shu gamyu ke ame shu improve kariye te lakhho...",yourInfoTitle:"Tamari Mahiti (Optional)",yourInfoSubtitle:"Tamari visits track karva ane tamaro experience sudharva ma madad male chhe.",nameLabel:"Naam (Optional)",namePlaceholder:"Tamaru naam lakho",phoneLabel:"Phone Number (Optional)",phonePlaceholder:"Tamaro phone number lakho",phoneHelper:"Athi ame tamari visit history track kari ne vadhu sari service api shakiye.",emailLabel:"Email (Optional)",emailPlaceholder:"Tamaro email address lakho",emailHelper:"Optional - tamari pahal ni visits match karva ma madad kare chhe.",skipButton:"Skip",feedbackSubmittedButton:"Feedback submit thai gayo",submittingButton:"Submit thai rahyu chhe...",submitButton:"Feedback Submit karo"},P={en:ie,hi:se,mr:le,gu:oe},ne="https://api.terracart.in".replace(/\/$/,""),A="terra_feedbackSubmittedOrders",B=()=>{try{const i=localStorage.getItem(A);if(!i)return[];const s=JSON.parse(i);return Array.isArray(s)?s.map(o=>o==null?"":String(o).trim()).filter(Boolean):[]}catch{return[]}},Q=i=>{if(!i)return!1;const s=String(i).trim();return s?B().includes(s):!1},ce=i=>{if(!i)return;const s=String(i).trim();if(!s)return;const o=B();o.includes(s)||(o.push(s),localStorage.setItem(A,JSON.stringify(o)))};function ge(){const i=Z(),s=ee(),[o,R]=r.useState(te()),a=t=>P[o]?.[t]||P.en?.[t]||t,n=s.state?.orderId||localStorage.getItem("terra_orderId_TAKEAWAY")||localStorage.getItem("terra_orderId_DINE_IN")||localStorage.getItem("terra_orderId")||localStorage.getItem("terra_lastPaidOrderId"),g=n?String(n).trim():"",L=(()=>{try{const t=JSON.parse(localStorage.getItem("terra_tableSelection")||localStorage.getItem("tableSelection")||"{}");return{tableId:t.id||t._id||t.tableId,cartId:t.cartId||t.cafeId}}catch{return{}}})(),[y]=r.useState(localStorage.getItem("accessibilityMode")==="true"),[c,M]=r.useState(0),[w,C]=r.useState(0),[v,H]=r.useState(0),[_,K]=r.useState(0),[S,Y]=r.useState(0),[D,z]=r.useState(0),[f,J]=r.useState(""),[x,q]=r.useState(()=>localStorage.getItem("terra_takeaway_customerName")||""),[N,W]=r.useState(()=>localStorage.getItem("terra_takeaway_customerMobile")||""),[T,$]=r.useState(()=>localStorage.getItem("terra_takeaway_customerEmail")||""),[b,j]=r.useState(!1),[U,G]=r.useState(!1),[F,m]=r.useState(""),[p,I]=r.useState(()=>Q(n));r.useEffect(()=>re(l=>{R(l)}),[]),r.useEffect(()=>{I(Q(n))},[n]);const k=({rating:t,setRating:l,hover:u,setHover:d,label:X})=>e.jsxs("div",{className:"rating-group",children:[e.jsx("label",{className:"rating-label",children:X}),e.jsx("div",{className:"stars-container",children:[1,2,3,4,5].map(h=>e.jsx(ae,{className:"star-icon",color:h<=(u||t)?"#FC8019":"#d1d5db",onClick:()=>l(h),onMouseEnter:()=>d(h),onMouseLeave:()=>d(0)},h))})]}),V=async t=>{if(t.preventDefault(),p){m(a("alreadySubmittedError"));return}if(c===0){m(a("overallRatingRequired"));return}j(!0),m("");try{const l={orderId:g||void 0,tableId:L.tableId||void 0,overallRating:c,orderFeedback:{foodQuality:v||void 0,serviceSpeed:S||void 0,comments:f.trim()||void 0},customerName:x.trim()||void 0,customerPhone:N.trim()||void 0,customerEmail:T.trim()||void 0};!l.orderFeedback.foodQuality&&!l.orderFeedback.serviceSpeed&&!l.orderFeedback.comments&&(l.orderFeedback=void 0);const u=await fetch(`${ne}/api/feedback/public`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!u.ok){const d=await u.json();throw new Error(d.message||a("submitFailed"))}ce(g),I(!0),G(!0),setTimeout(()=>{i("/menu")},3e3)}catch(l){m(l.message||a("genericError")),j(!1)}};return U?e.jsxs("div",{className:`feedback-page ${y?"accessibility-mode":""}`,children:[e.jsxs("div",{className:"background-container",children:[e.jsx("img",{src:E,alt:a("restaurantAlt"),className:"background-image"}),e.jsx("div",{className:"background-overlay"})]}),e.jsxs("div",{className:"content-wrapper",children:[e.jsx(O,{}),e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"feedback-card success-card",children:[e.jsx("div",{className:"success-icon",children:"OK"}),e.jsx("h2",{className:"success-title",children:a("thankYouTitle")}),e.jsx("p",{className:"success-message",children:a("feedbackSubmittedMessage")}),e.jsx("p",{className:"redirect-message",children:a("redirectMessage")})]})})]})]}):e.jsxs("div",{className:`feedback-page ${y?"accessibility-mode":""}`,children:[e.jsxs("div",{className:"background-container",children:[e.jsx("img",{src:E,alt:a("restaurantAlt"),className:"background-image"}),e.jsx("div",{className:"background-overlay"})]}),e.jsxs("div",{className:"content-wrapper",children:[e.jsx(O,{}),e.jsx("div",{className:"main-content",children:e.jsxs("form",{className:"feedback-card",onSubmit:V,children:[e.jsx("h2",{className:"feedback-title",children:a("shareFeedbackTitle")}),e.jsx("p",{className:"feedback-subtitle",children:a("shareFeedbackSubtitle")}),F&&e.jsx("div",{className:"error-message",children:F}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:a("overallExperienceTitle")}),e.jsx(k,{rating:c,setRating:M,hover:w,setHover:C,label:""})]}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:a("foodQualityTitle")}),e.jsx(k,{rating:v,setRating:H,hover:_,setHover:K,label:""})]}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:a("serviceQualityTitle")}),e.jsx(k,{rating:S,setRating:Y,hover:D,setHover:z,label:""})]}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"input-label",children:a("commentsLabel")}),e.jsx("textarea",{className:"feedback-textarea",value:f,onChange:t=>J(t.target.value),placeholder:a("commentsPlaceholder"),rows:4})]})}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:a("yourInfoTitle")}),e.jsx("p",{className:"section-subtitle",style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"1rem"},children:a("yourInfoSubtitle")}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"input-label",children:a("nameLabel")}),e.jsx("input",{type:"text",className:"feedback-input",value:x,onChange:t=>q(t.target.value),placeholder:a("namePlaceholder")})]}),e.jsxs("div",{className:"input-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"input-label",children:a("phoneLabel")}),e.jsx("input",{type:"tel",className:"feedback-input",value:N,onChange:t=>W(t.target.value),placeholder:a("phonePlaceholder"),pattern:"[0-9]{10}"}),e.jsx("small",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",display:"block"},children:a("phoneHelper")})]}),e.jsxs("div",{className:"input-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"input-label",children:a("emailLabel")}),e.jsx("input",{type:"email",className:"feedback-input",value:T,onChange:t=>$(t.target.value),placeholder:a("emailPlaceholder")}),e.jsx("small",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",display:"block"},children:a("emailHelper")})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>i("/menu"),disabled:b,children:a("skipButton")}),e.jsx("button",{type:"submit",className:"submit-button",disabled:b||c===0||p,children:a(p?"feedbackSubmittedButton":b?"submittingButton":"submitButton")})]})]})})]})]})}export{ge as default};
