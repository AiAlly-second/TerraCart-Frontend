import{u as W,c as A,r as s,j as e,k as B}from"./vendor-react-D1Ov3a92.js";import{r as y,H as S}from"./page-Billing.jsx-CvG5gaYx.js";/* empty css                              */import"./vendor-CB8mghnX.js";import"./vendor-motion-DMcOTFRV.js";/* empty css                         */const J="https://api.terracart.in".replace(/\/$/,"");function ae(){const m=W(),f=A().state?.orderId||localStorage.getItem("terra_orderId")||localStorage.getItem("terra_lastPaidOrderId"),k=(()=>{try{const a=JSON.parse(localStorage.getItem("terra_tableSelection")||localStorage.getItem("tableSelection")||"{}");return{tableId:a.id||a._id||a.tableId,cartId:a.cartId||a.cafeId}}catch{return{}}})(),[u,G]=s.useState(localStorage.getItem("accessibilityMode")==="true"),[i,I]=s.useState(0),[F,w]=s.useState(0),[p,C]=s.useState(0),[E,Q]=s.useState(0),[b,R]=s.useState(0),[O,T]=s.useState(0),[h,H]=s.useState(""),[v,P]=s.useState(""),[g,M]=s.useState(""),[x,D]=s.useState(""),[l,j]=s.useState(!1),[Y,_]=s.useState(!1),[N,n]=s.useState(""),d=({rating:a,setRating:t,hover:r,setHover:o,label:z})=>e.jsxs("div",{className:"rating-group",children:[e.jsx("label",{className:"rating-label",children:z}),e.jsx("div",{className:"stars-container",children:[1,2,3,4,5].map(c=>e.jsx(B,{className:"star-icon",color:c<=(r||a)?"#FC8019":"#d1d5db",onClick:()=>t(c),onMouseEnter:()=>o(c),onMouseLeave:()=>o(0)},c))})]}),$=async a=>{if(a.preventDefault(),i===0){n("Please provide an overall rating");return}j(!0),n("");try{const t={orderId:f||void 0,tableId:k.tableId||void 0,overallRating:i,orderFeedback:{foodQuality:p||void 0,serviceSpeed:b||void 0,comments:h.trim()||void 0},customerName:v.trim()||void 0,customerPhone:g.trim()||void 0,customerEmail:x.trim()||void 0};!t.orderFeedback.foodQuality&&!t.orderFeedback.serviceSpeed&&!t.orderFeedback.comments&&(t.orderFeedback=void 0);const r=await fetch(`${J}/api/feedback/public`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){const o=await r.json();throw new Error(o.message||"Failed to submit feedback")}_(!0),setTimeout(()=>{m("/menu")},3e3)}catch(t){n(t.message||"Something went wrong. Please try again."),j(!1)}};return Y?e.jsxs("div",{className:`feedback-page ${u?"accessibility-mode":""}`,children:[e.jsxs("div",{className:"background-container",children:[e.jsx("img",{src:y,alt:"Restaurant",className:"background-image"}),e.jsx("div",{className:"background-overlay"})]}),e.jsxs("div",{className:"content-wrapper",children:[e.jsx(S,{}),e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"feedback-card success-card",children:[e.jsx("div",{className:"success-icon",children:"âœ“"}),e.jsx("h2",{className:"success-title",children:"Thank You!"}),e.jsx("p",{className:"success-message",children:"Your feedback has been submitted successfully. We appreciate your time!"}),e.jsx("p",{className:"redirect-message",children:"Redirecting to Main page..."})]})})]})]}):e.jsxs("div",{className:`feedback-page ${u?"accessibility-mode":""}`,children:[e.jsxs("div",{className:"background-container",children:[e.jsx("img",{src:y,alt:"Restaurant",className:"background-image"}),e.jsx("div",{className:"background-overlay"})]}),e.jsxs("div",{className:"content-wrapper",children:[e.jsx(S,{}),e.jsx("div",{className:"main-content",children:e.jsxs("form",{className:"feedback-card",onSubmit:$,children:[e.jsx("h2",{className:"feedback-title",children:"Share Your Feedback"}),e.jsx("p",{className:"feedback-subtitle",children:"We value your opinion!"}),N&&e.jsx("div",{className:"error-message",children:N}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:"How was your experience? *"}),e.jsx(d,{rating:i,setRating:I,hover:F,setHover:w,label:""})]}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:"Food Quality"}),e.jsx(d,{rating:p,setRating:C,hover:E,setHover:Q,label:""})]}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:"Service Quality"}),e.jsx(d,{rating:b,setRating:R,hover:O,setHover:T,label:""})]}),e.jsx("div",{className:"section",children:e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"input-label",children:"Comments (Optional)"}),e.jsx("textarea",{className:"feedback-textarea",value:h,onChange:a=>H(a.target.value),placeholder:"Tell us what you liked or how we can improve...",rows:4})]})}),e.jsxs("div",{className:"section",children:[e.jsx("h3",{className:"section-title",children:"Your Information (Optional)"}),e.jsx("p",{className:"section-subtitle",style:{fontSize:"0.875rem",color:"#6b7280",marginBottom:"1rem"},children:"Help us track your visits and improve your experience"}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{className:"input-label",children:"Name (Optional)"}),e.jsx("input",{type:"text",className:"feedback-input",value:v,onChange:a=>P(a.target.value),placeholder:"Enter your name"})]}),e.jsxs("div",{className:"input-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"input-label",children:"Phone Number (Optional)"}),e.jsx("input",{type:"tel",className:"feedback-input",value:g,onChange:a=>M(a.target.value),placeholder:"Enter your phone number",pattern:"[0-9]{10}"}),e.jsx("small",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",display:"block"},children:"We'll use this to track your visit history and provide better service"})]}),e.jsxs("div",{className:"input-group",style:{marginTop:"1rem"},children:[e.jsx("label",{className:"input-label",children:"Email (Optional)"}),e.jsx("input",{type:"email",className:"feedback-input",value:x,onChange:a=>D(a.target.value),placeholder:"Enter your email address"}),e.jsx("small",{style:{fontSize:"0.75rem",color:"#6b7280",marginTop:"0.25rem",display:"block"},children:"Optional - helps us match your previous visits"})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"button",className:"cancel-button",onClick:()=>m("/menu"),disabled:l,children:"Skip"}),e.jsx("button",{type:"submit",className:"submit-button",disabled:l||i===0,children:l?"Submitting...":"Submit Feedback"})]})]})})]})]})}export{ae as default};
