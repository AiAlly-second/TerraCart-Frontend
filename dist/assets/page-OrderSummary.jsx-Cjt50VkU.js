import{u as G,r as x,j as e}from"./vendor-react-D1Ov3a92.js";import{r as J,H as X}from"./page-Billing.jsx-W-Wu8IRR.js";import{O as Z}from"./page-Menu.jsx-DKJCkEB2.js";import{l as ee}from"./vendor-socket-DJ_CsPWr.js";/* empty css                              */import{h as re,E as se}from"./vendor-pdf-KWoZMcRy.js";import"./vendor-CB8mghnX.js";import"./vendor-motion-DMcOTFRV.js";/* empty css                         */import"./page-CartPage.jsx-CBUVA__J.js";/* empty css                          *//* empty css                          */const ae={loading:"Loading order summary...",orderSummary:"Order Summary",totalItems:"Total Items:",subtotal:"Subtotal:",gst:"GST (5%):",total:"Total:",cookingInstructions:"Cooking Instructions",placeholderRequests:"Any special requests...",confirmOrder:"Confirm Order",viewBill:"View Bill",orderId:"Order ID:",tableNumber:"Table Number:",close:"Close",noOrderFound:"âŒ No order found!",fetchFailed:"âŒ Failed to fetch order summary.",restaurantName:"Terra Cart",address:`Câ€‘Square, Dindori Rd,
Opp. Akash Petrol Pump,
Kalananagar, Nashik,
Maharashtra 422004`,takeawayLabel:"Takeaway",tableLabel:"Table",serviceTypeLabel:"Service",dineInLabel:"Dine-In"},te={loading:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",orderSummary:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶",totalItems:"à¤•à¥à¤² à¤µà¤¸à¥à¤¤à¥à¤à¤‚:",subtotal:"à¤‰à¤ª-à¤¯à¥‹à¤—:",gst:"à¤œà¥€à¤à¤¸à¤Ÿà¥€ (5%):",total:"à¤•à¥à¤²:",cookingInstructions:"à¤ªà¤•à¤¾à¤¨à¥‡ à¤•à¥‡ à¤¨à¤¿à¤°à¥à¤¦à¥‡à¤¶",placeholderRequests:"à¤•à¥‹à¤ˆ à¤µà¤¿à¤¶à¥‡à¤· à¤…à¤¨à¥à¤°à¥‹à¤§...",confirmOrder:"à¤‘à¤°à¥à¤¡à¤° à¤•à¥€ à¤ªà¥à¤·à¥à¤Ÿà¤¿ à¤•à¤°à¥‡à¤‚",viewBill:"à¤¬à¤¿à¤² à¤¦à¥‡à¤–à¥‡à¤‚",orderId:"à¤‘à¤°à¥à¤¡à¤° à¤†à¤ˆà¤¡à¥€:",tableNumber:"à¤Ÿà¥‡à¤¬à¤² à¤¨à¤‚à¤¬à¤°:",close:"à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚",noOrderFound:"âŒ à¤•à¥‹à¤ˆ à¤‘à¤°à¥à¤¡à¤° à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾!",fetchFailed:"âŒ à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤µà¤¿à¤«à¤²à¥¤",restaurantName:"à¤Ÿà¥‡à¤°à¤¾ à¤•à¤¾à¤°à¥à¤Ÿ",address:`à¤¸à¥€-à¤¸à¥à¤•à¥à¤µà¤¾à¤¯à¤°, à¤¦à¤¿à¤‚à¤¡à¥‹à¤°à¥€ à¤°à¥‹à¤¡,
à¤†à¤•à¤¾à¤¶ à¤ªà¥‡à¤Ÿà¥à¤°à¥‹à¤² à¤ªà¤‚à¤ª à¤•à¥‡ à¤¸à¤¾à¤®à¤¨à¥‡,
à¤•à¤²à¤¾à¤¨à¤—à¤°, à¤¨à¤¾à¤¸à¤¿à¤•,
à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤° 422004`,takeawayLabel:"à¤ªà¥ˆà¤•à¥‡à¤Ÿ",tableLabel:"à¤Ÿà¥‡à¤¬à¤²",serviceTypeLabel:"à¤¸à¥‡à¤µà¤¾",dineInLabel:"à¤¡à¤¾à¤‡à¤¨-à¤‡à¤¨"},ne={loading:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤²à¥‹à¤¡ à¤¹à¥‹à¤¤ à¤†à¤¹à¥‡...",orderSummary:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶",totalItems:"à¤à¤•à¥‚à¤£ à¤µà¤¸à¥à¤¤à¥‚:",subtotal:"à¤‰à¤ª-à¤à¤•à¥‚à¤£:",gst:"à¤œà¥€à¤à¤¸à¤Ÿà¥€ (5%):",total:"à¤à¤•à¥‚à¤£:",cookingInstructions:"à¤¸à¥à¤µà¤¯à¤‚à¤ªà¤¾à¤•à¤¾à¤šà¥à¤¯à¤¾ à¤¸à¥‚à¤šà¤¨à¤¾",placeholderRequests:"à¤•à¥‹à¤£à¤¤à¥€à¤¹à¥€ à¤µà¤¿à¤¶à¥‡à¤· à¤µà¤¿à¤¨à¤‚à¤¤à¥€...",confirmOrder:"à¤‘à¤°à¥à¤¡à¤° à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¤¾",viewBill:"à¤¬à¤¿à¤² à¤ªà¤¹à¤¾",orderId:"à¤‘à¤°à¥à¤¡à¤° à¤†à¤¯à¤¡à¥€:",tableNumber:"à¤Ÿà¥‡à¤¬à¤² à¤•à¥à¤°à¤®à¤¾à¤‚à¤•:",close:"à¤¬à¤‚à¤¦ à¤•à¤°à¤¾",noOrderFound:"âŒ à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤ªà¤¡à¤²à¤¾ à¤¨à¤¾à¤¹à¥€!",fetchFailed:"âŒ à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤†à¤£à¤£à¥à¤¯à¤¾à¤¤ à¤…à¤¯à¤¶à¤¸à¥à¤µà¥€.",restaurantName:"à¤Ÿà¥‡à¤°à¤¾ à¤•à¤¾à¤°à¥à¤Ÿ",address:`à¤¸à¥€-à¤¸à¥à¤•à¥à¤µà¥‡à¤…à¤°, à¤¦à¤¿à¤‚à¤¡à¥‹à¤°à¥€ à¤°à¥‹à¤¡,
à¤†à¤•à¤¾à¤¶ à¤ªà¥‡à¤Ÿà¥à¤°à¥‹à¤² à¤ªà¤‚à¤ª à¤¸à¤®à¥‹à¤°,
à¤•à¤²à¤¾à¤¨à¤—à¤°, à¤¨à¤¾à¤¶à¤¿à¤•,
à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤° 422004`,takeawayLabel:"à¤ªà¤¾à¤°à¥à¤¸à¤²",tableLabel:"à¤Ÿà¥‡à¤¬à¤²",serviceTypeLabel:"à¤¸à¥‡à¤µà¤¾",dineInLabel:"à¤¡à¤¾à¤‡à¤¨-à¤‡à¤¨"},oe={loading:"àª“àª°à«àª¡àª° àª¸àª¾àª°àª¾àª‚àª¶ àª²à«‹àª¡ àª¥àªˆ àª°àª¹à«àª¯à«‹ àª›à«‡...",orderSummary:"àª“àª°à«àª¡àª° àª¸àª¾àª°àª¾àª‚àª¶",totalItems:"àª•à«àª² àªµàª¸à«àª¤à«àª“:",subtotal:"àª‰àªªàª•à«àª²:",gst:"àªœà«€àªàª¸àªŸà«€ (5%):",total:"àª•à«àª²:",cookingInstructions:"àª°àª¸à«‹àªˆ àª¸à«àªšàª¨àª¾àª“",placeholderRequests:"àª•à«‹àªˆ àª–àª¾àª¸ àªµàª¿àª¨àª‚àª¤à«€àª“...",confirmOrder:"àª“àª°à«àª¡àª° àªªà«àª·à«àªŸàª¿ àª•àª°à«‹",viewBill:"àª¬àª¿àª² àªœà«àª“",orderId:"àª“àª°à«àª¡àª° àª†àª‡àª¡à«€:",tableNumber:"àªŸà«‡àª¬àª² àª¨àª‚àª¬àª°:",close:"àª¬àª‚àª§ àª•àª°à«‹",noOrderFound:"âŒ àª•à«‹àªˆ àª“àª°à«àª¡àª° àª®àª³à«àª¯à«‹ àª¨àª¥à«€!",fetchFailed:"âŒ àª“àª°à«àª¡àª° àª¸àª¾àª°àª¾àª‚àª¶ àª®à«‡àª³àªµàªµàª¾àª®àª¾àª‚ àª¨àª¿àª·à«àª«àª³.",restaurantName:"àªŸà«‡àª°àª¾ àª•àª¾àª°à«àªŸ",address:`àª¸à«€-àª¸à«àª•à«àªµà«‡àª°, àª¦àª¿àª‚àª¡à«‹àª°à«€ àª°à«‹àª¡,
àª†àª•àª¾àª¶ àªªà«‡àªŸà«àª°à«‹àª² àªªàª‚àªª àª¸àª¾àª®à«‡,
àª•àª²àª¾àª¨àª—àª°, àª¨àª¾àª¸àª¿àª•,
àª®àª¹àª¾àª°àª¾àª·à«àªŸà«àª° 422004`,takeawayLabel:"àªªàª¾àª°à«àª¸àª²",tableLabel:"àªŸà«‡àª¬àª²",serviceTypeLabel:"àª¸à«‡àªµàª¾",dineInLabel:"àª¡àª¾àª‡àª¨-àª‡àª¨"},N={en:ae,hi:te,mr:ne,gu:oe},W="https://api.terracart.in".replace(/\/$/,""),H=(t=[])=>{const r={};return t.forEach(i=>{(i?.items||[]).forEach(l=>{if(!l)return;const h=l.name||"Item";r[h]||(r[h]={name:h,quantity:0,returnedQuantity:0,price:l.price||0,returned:!1});const p=r[h];l.returned?(p.returnedQuantity+=Number(l.quantity)||0,p.returned=!0):p.quantity+=Number(l.quantity)||0,!p.price&&l.price&&(p.price=l.price)})}),Object.values(r)},ie=t=>{const r=t.reduce((p,A)=>{const j=Number(A.price)||0,v=Number(A.quantity)||0;return p+j*v},0),i=Number((r/100).toFixed(2));return{subtotal:i,gst:0,totalAmount:i}},le=(t=[])=>{const r=H(t);return ie(r)},ce=t=>{if(!t)return"INV-NA";const r=new Date(t.createdAt||Date.now()).toISOString().slice(0,10).replace(/-/g,""),i=(t.cartId||t._id||"").toString().slice(-6).toUpperCase();return`INV-${r}-${i}`},y=t=>{const r=Number(t);return Number.isNaN(r)?"0.00":r.toFixed(2)},de=t=>!t||!t.id?null:{employeeId:t.id,employeeName:t.name||null,employeeRole:t.role||null,disability:{hasDisability:!!t.disability,type:t.disability||null},acceptedAt:t.acceptedAt||null},me=t=>{const r=t?.assignmentDisplayType;if(r==="TEAM"||r==="INDIVIDUAL")return r;const i=t?.assignedStaff?.role||t?.acceptedBy?.employeeRole;return String(i||"").toUpperCase()==="ADMIN"?"TEAM":"INDIVIDUAL"};function Te(){const t=G(),[r,i]=x.useState(null),[l,h]=x.useState(!1),[p,A]=x.useState(!1),[j,v]=x.useState(!1),k=x.useRef(null),[K]=x.useState(localStorage.getItem("accessibilityMode")==="true"),O={Pending:"ðŸ“ Order is being processed...",Accepted:"âœ… Your order has been accepted! A staff member is assisting you.",Confirmed:"ðŸ‘¨â€ðŸ³ Order confirmed! Kitchen is getting ready.",Preparing:"ðŸ”¥ Your food is being prepared","Being Prepared":"ðŸ”¥ Your food is being prepared",BeingPrepared:"ðŸ”¥ Your food is being prepared",Ready:"âœ¨ Your food is ready to be served",Completed:"ðŸ“¦ Your order is ready for pickup!",Served:"ðŸ½ï¸ Enjoy your meal!",Finalized:"ðŸ“‹ Order completed, preparing bill",Paid:"âœ… Thank you for dining with us!",Cancelled:"âŒ Order has been cancelled",Returned:"â†©ï¸ Order has been returned. Please contact staff if you need assistance."},g=localStorage.getItem("language")||"en",n=a=>N[g]?.[a]||a,_=localStorage.getItem("terra_serviceType")||"DINE_IN",b=_==="TAKEAWAY"?localStorage.getItem("terra_orderId_TAKEAWAY")||localStorage.getItem("terra_orderId"):localStorage.getItem("terra_orderId_DINE_IN")||localStorage.getItem("terra_orderId");if(console.log("[OrderSummary] Loading order:",{serviceType:_,orderId:b,fromStorage:{generic:localStorage.getItem("terra_orderId"),dineIn:localStorage.getItem("terra_orderId_DINE_IN"),takeaway:localStorage.getItem("terra_orderId_TAKEAWAY")}}),x.useEffect(()=>{if(!b)return;const a=async()=>{try{const s=await fetch(`${W}/api/orders/${b}`);if(!s.ok){if(s.status===404)return alert(N[g]?.noOrderFound||"No order found"),t("/menu"),null;throw new Error(`Failed to fetch order: ${s.status}`)}const d=await s.json();return d?(i(d),d.status==="Cancelled"||d.status==="Returned"?(localStorage.removeItem("terra_orderId"),localStorage.removeItem("terra_cart"),localStorage.removeItem("terra_orderId_TAKEAWAY"),localStorage.removeItem("terra_orderId_DINE_IN"),alert(d.status==="Returned"?"Order has been returned.":N[g]?.orderCancelled||"Order cancelled"),t("/menu"),null):d):(alert(N[g]?.noOrderFound||"No order found"),null)}catch(s){return console.error("Error fetching order:",s),alert(N[g]?.noOrderFound||"No order found"),null}},c=s=>{s?._id===b&&(i(s),(s.status==="Cancelled"||s.status==="Returned")&&(localStorage.removeItem("terra_orderId"),localStorage.removeItem("terra_cart"),localStorage.removeItem("terra_orderId_TAKEAWAY"),localStorage.removeItem("terra_orderId_DINE_IN"),alert(s.status==="Returned"?"Order has been returned.":N[g]?.orderCancelled||"Order cancelled"),t("/menu")))},u=s=>{if(!s)return;const d=s.orderId||s.order?._id||s.order?.id;if(String(d||"")===String(b||"")){if(s.order&&typeof s.order=="object"){i({...s.order,assignedStaff:s.assignedStaff||s.order.assignedStaff||null,assignmentDisplayType:s.assignmentDisplayType||s.order.assignmentDisplayType||null});return}s.assignedStaff&&i(f=>f&&{...f,status:s.status||f.status,assignedStaff:s.assignedStaff,assignmentDisplayType:s.assignmentDisplayType||f.assignmentDisplayType||null,acceptedBy:de(s.assignedStaff)||f.acceptedBy})}};let o=null;try{o=ee(W,{transports:["polling","websocket"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4,autoConnect:!0,forceNew:!1}),o.on("connect",()=>{console.log("[OrderSummary] Socket connected")}),a().then(s=>{s?.cartId&&o&&o.emit("join:cart",s.cartId.toString())}),o.on("connect_error",s=>{s.message&&!s.message.includes("xhr poll error")&&console.warn("[OrderSummary] Socket connection error:",s.message)}),o.on("disconnect",s=>{s!=="io client disconnect"&&console.log("[OrderSummary] Socket disconnected:",s)}),o.on("orderUpdated",c),o.on("ORDER_ACCEPTED",u)}catch(s){console.warn("[OrderSummary] Failed to create socket connection:",s)}return()=>{o&&(o.off("orderUpdated",c),o.off("ORDER_ACCEPTED",u),o.off("connect"),o.off("connect_error"),o.off("disconnect"),o.disconnect(),o=null)}},[b,g,t]),!r)return e.jsx("div",{className:"order-summary-page loading-screen",children:n("loading")});const I=H(r.kotLines),S=le(r.kotLines),C=I.reduce((a,c)=>a+c.quantity,0),m=r.serviceType==="TAKEAWAY",E=r.table?.number??r.tableNumber??"â€”",w=r.table?.name,L=n(m?"takeawayLabel":"dineInLabel"),R=ce(r),F=me(r)==="TEAM",P=r.acceptedBy?.employeeName||r.assignedStaff?.name,q=r.assignedStaff?.role||r.acceptedBy?.employeeRole,B=r.acceptedBy?.disability?.type||r.assignedStaff?.disability,U=async()=>{if(!(!k.current||j)){v(!0);try{const a=await re(k.current,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",onclone:V=>{V.querySelectorAll("*").forEach(D=>{const z=window.getComputedStyle(D);["color","backgroundColor","borderColor"].forEach(T=>{const $=z[T];$&&$.includes("oklch")&&(D.style[T]="#000000",T==="backgroundColor"&&(D.style[T]="transparent"))})})}}),c=a.toDataURL("image/png"),u=80,o=4,s=u-o*2,d=a.width,M=a.height/d,Q=s*M+o*2,Y=new se({orientation:"portrait",unit:"mm",format:[u,Q]});Y.addImage(c,"PNG",o,o,s,s*M),Y.save(`${R}.pdf`)}catch(a){console.error("Invoice download failed (Detailed):",a),alert(`Failed to generate PDF: ${a.message||"Unknown error"}`)}finally{v(!1)}}};return e.jsxs("div",{className:`order-summary-page ${K?"accessibility":""}`,children:[e.jsxs("div",{className:"background-container",children:[e.jsx("img",{src:J,alt:n("restaurantName"),className:"background-image"}),e.jsx("div",{className:"background-overlay"})]}),e.jsxs("div",{className:"content-wrapper",children:[e.jsx(X,{}),e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"summary-card",children:[e.jsx("h2",{className:"summary-title",children:n("orderSummary")}),e.jsxs("div",{className:"order-meta",children:[e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:n("orderId")}),e.jsx("span",{children:r._id||"â€”"})]}),m&&r.takeawayToken&&e.jsxs("div",{className:"order-meta-row",style:{backgroundColor:"#dbeafe",padding:"8px",borderRadius:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#1e40af"},children:"Token:"}),e.jsx("span",{style:{fontSize:"1.2em",fontWeight:"bold",color:"#2563eb"},children:r.takeawayToken})]}),!m&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:n("serviceTypeLabel")}),e.jsx("span",{children:L})]}),!m&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:n("tableLabel")}),e.jsxs("span",{children:[E,w?` Â· ${w}`:""]})]}),m&&(r.customerName||r.customerMobile)&&e.jsxs(e.Fragment,{children:[r.customerName&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:"Customer Name:"}),e.jsx("span",{children:r.customerName})]}),r.customerMobile&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:"Mobile:"}),e.jsx("span",{children:r.customerMobile})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(Z,{status:r.status,serviceType:r.serviceType,className:"mb-2"}),e.jsx("p",{className:"text-lg text-center font-medium text-gray-700",children:O[r.status]||O.Pending}),F&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg text-center",children:e.jsx("p",{className:"text-green-800 font-medium",children:"Your order has been confirmed and is being prepared by our team."})}),!F&&P&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg text-center",children:[e.jsxs("p",{className:"text-green-800 font-medium",children:["Your order has been accepted by ",P]}),q&&e.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:["Role: ",q]}),B&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Your server has indicated: ",B]})]})]}),e.jsx("div",{className:"items-list",children:I.map(a=>{const u=(a.price||0)/100*(a.quantity||0);return e.jsxs("div",{className:"item-row",children:[e.jsxs("span",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{children:[a.name,a.quantity>0?` Ã— ${a.quantity}`:""]}),a.returned&&e.jsxs("span",{className:"meta-chip returned-chip",children:["Returned ",a.returnedQuantity]})]}),e.jsx("span",{children:a.quantity>0?`â‚¹${y(u)}`:"Returned"})]},a.name)})}),e.jsxs("div",{className:"summary-totals",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:n("totalItems")}),e.jsx("span",{children:C})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:n("subtotal")}),e.jsxs("span",{children:["â‚¹",S.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"total-row total-bold",children:[e.jsx("span",{children:n("total")}),e.jsxs("span",{children:["â‚¹",S.totalAmount.toFixed(2)]})]})]}),e.jsxs("div",{className:"buttons-row",children:[e.jsx("button",{onClick:()=>t("/menu"),className:"primary-btn",children:n("confirmOrder")}),e.jsx("button",{onClick:()=>h(!0),className:"secondary-btn",children:n("viewBill")})]})]})})]}),l&&e.jsx("div",{className:"bill-modal-overlay",children:e.jsxs("div",{className:"bill-modal",children:[e.jsxs("div",{className:"bill-modal-header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Invoice"}),e.jsxs("p",{className:"invoice-meta",children:[e.jsxs("span",{children:[n("orderId")," ",r._id]}),e.jsx("span",{children:new Date(r.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"bill-modal-actions",children:[e.jsx("button",{onClick:U,disabled:j,className:"invoice-action-btn download",children:j?"Preparingâ€¦":"Download"}),e.jsx("button",{onClick:()=>h(!1),className:"invoice-close-btn",children:"âœ•"})]})]}),e.jsxs("div",{ref:k,className:"invoice-preview",children:[e.jsxs("div",{className:"invoice-top",children:[e.jsxs("div",{children:[e.jsx("div",{className:"brand-name",children:r.cafe?.cafeName||r.cafe?.name||"Terra Cart"}),e.jsx("div",{className:"brand-address",children:r.cafe?.address||r.franchise?.address||"â€”"}),(r.franchise?.fssaiNumber||r.franchise?.fssai||r.cafe?.fssaiNumber||r.cafe?.fssai)&&e.jsxs("div",{className:"brand-address",children:["FSSAI No:"," ",r.franchise?.fssaiNumber||r.franchise?.fssai||r.cafe?.fssaiNumber||r.cafe?.fssai]}),(r.franchise?.gstNumber||r.cafe?.gstNumber)&&e.jsxs("div",{className:"brand-address",children:["FSSAI No:"," ",r.franchise?.gstNumber||r.cafe?.gstNumber]})]}),e.jsxs("div",{className:"invoice-meta-block",children:[e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Invoice No:"}),e.jsx("span",{children:R})]}),m&&r.takeawayToken&&e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Token:"}),e.jsx("span",{className:"font-bold text-blue-600",children:r.takeawayToken})]}),e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{children:new Date(r.paidAt||r.updatedAt||r.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Time:"}),e.jsx("span",{children:new Date(r.paidAt||r.updatedAt||r.createdAt).toLocaleTimeString()})]})]})]}),e.jsxs("div",{className:"invoice-billed",children:[!m&&e.jsxs("div",{className:"meta-line",children:[e.jsxs("span",{children:[n("serviceTypeLabel"),":"]}),e.jsx("span",{children:L})]}),!m&&e.jsxs("div",{className:"meta-line",children:[e.jsxs("span",{children:[n("tableLabel"),":"]}),e.jsxs("span",{children:[E,w?` Â· ${w}`:""]})]}),m&&(r.customerName||r.customerMobile)&&e.jsxs(e.Fragment,{children:[r.customerName&&e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Customer Name:"}),e.jsx("span",{children:r.customerName})]}),r.customerMobile&&e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Mobile Number:"}),e.jsx("span",{children:r.customerMobile})]})]})]}),e.jsxs("table",{className:"invoice-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:n("itemHeader")||"Item"}),e.jsx("th",{children:n("quantityHeader")||"Qty"}),e.jsx("th",{children:n("priceHeader")||"Price (â‚¹)"}),e.jsx("th",{className:"align-right",children:n("amountHeader")||"Amount (â‚¹)"})]})}),e.jsx("tbody",{children:I.length>0?I.map(a=>{const c=(a.price||0)/100,u=c*(a.quantity||0);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{children:a.name}),a.returned&&e.jsxs("span",{className:"invoice-returned-note",children:["Returned ",a.returnedQuantity]})]})}),e.jsx("td",{children:a.quantity>0?a.quantity:"â€”"}),e.jsxs("td",{children:["â‚¹",y(c)]}),e.jsx("td",{className:"align-right",children:a.quantity>0?`â‚¹${y(u)}`:"Returned"})]},a.name)}):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"empty-row",children:"No items found"})})})]}),e.jsxs("div",{className:"invoice-totals",children:[e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:n("totalItems")}),e.jsx("span",{children:C})]}),e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:n("subtotal")}),e.jsxs("span",{children:["â‚¹",y(S.subtotal)]})]}),e.jsxs("div",{className:"meta-line total",children:[e.jsx("span",{children:n("total")}),e.jsxs("span",{children:["â‚¹",y(S.totalAmount)]})]})]}),e.jsx("div",{className:"invoice-footer",children:"Thank you for dining with Terra Cart. We hope to see you again!"})]})]})})]})}export{Te as default};
