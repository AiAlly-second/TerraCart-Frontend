import{u as z,r as x,j as e}from"./vendor-react-D1Ov3a92.js";import{r as G,H as J}from"./page-Billing.jsx-CvG5gaYx.js";import{O as X}from"./page-Menu.jsx-bvqzRMR7.js";import{l as Z}from"./vendor-socket-DJ_CsPWr.js";/* empty css                              */import{h as ee,E as re}from"./vendor-pdf-KWoZMcRy.js";import"./vendor-CB8mghnX.js";import"./vendor-motion-DMcOTFRV.js";/* empty css                         */import"./page-CartPage.jsx-BFJaz61i.js";/* empty css                          *//* empty css                          */const ae={loading:"Loading order summary...",orderSummary:"Order Summary",totalItems:"Total Items:",subtotal:"Subtotal:",gst:"GST (5%):",total:"Total:",cookingInstructions:"Cooking Instructions",placeholderRequests:"Any special requests...",confirmOrder:"Confirm Order",viewBill:"View Bill",orderId:"Order ID:",tableNumber:"Table Number:",close:"Close",noOrderFound:"âŒ No order found!",fetchFailed:"âŒ Failed to fetch order summary.",restaurantName:"Terra Cart",address:`Câ€‘Square, Dindori Rd,
Opp. Akash Petrol Pump,
Kalananagar, Nashik,
Maharashtra 422004`,takeawayLabel:"Takeaway",tableLabel:"Table",serviceTypeLabel:"Service",dineInLabel:"Dine-In"},se={loading:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",orderSummary:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶",totalItems:"à¤•à¥à¤² à¤µà¤¸à¥à¤¤à¥à¤à¤‚:",subtotal:"à¤‰à¤ª-à¤¯à¥‹à¤—:",gst:"à¤œà¥€à¤à¤¸à¤Ÿà¥€ (5%):",total:"à¤•à¥à¤²:",cookingInstructions:"à¤ªà¤•à¤¾à¤¨à¥‡ à¤•à¥‡ à¤¨à¤¿à¤°à¥à¤¦à¥‡à¤¶",placeholderRequests:"à¤•à¥‹à¤ˆ à¤µà¤¿à¤¶à¥‡à¤· à¤…à¤¨à¥à¤°à¥‹à¤§...",confirmOrder:"à¤‘à¤°à¥à¤¡à¤° à¤•à¥€ à¤ªà¥à¤·à¥à¤Ÿà¤¿ à¤•à¤°à¥‡à¤‚",viewBill:"à¤¬à¤¿à¤² à¤¦à¥‡à¤–à¥‡à¤‚",orderId:"à¤‘à¤°à¥à¤¡à¤° à¤†à¤ˆà¤¡à¥€:",tableNumber:"à¤Ÿà¥‡à¤¬à¤² à¤¨à¤‚à¤¬à¤°:",close:"à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚",noOrderFound:"âŒ à¤•à¥‹à¤ˆ à¤‘à¤°à¥à¤¡à¤° à¤¨à¤¹à¥€à¤‚ à¤®à¤¿à¤²à¤¾!",fetchFailed:"âŒ à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤µà¤¿à¤«à¤²à¥¤",restaurantName:"à¤Ÿà¥‡à¤°à¤¾ à¤•à¤¾à¤°à¥à¤Ÿ",address:`à¤¸à¥€-à¤¸à¥à¤•à¥à¤µà¤¾à¤¯à¤°, à¤¦à¤¿à¤‚à¤¡à¥‹à¤°à¥€ à¤°à¥‹à¤¡,
à¤†à¤•à¤¾à¤¶ à¤ªà¥‡à¤Ÿà¥à¤°à¥‹à¤² à¤ªà¤‚à¤ª à¤•à¥‡ à¤¸à¤¾à¤®à¤¨à¥‡,
à¤•à¤²à¤¾à¤¨à¤—à¤°, à¤¨à¤¾à¤¸à¤¿à¤•,
à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤° 422004`,takeawayLabel:"à¤ªà¥ˆà¤•à¥‡à¤Ÿ",tableLabel:"à¤Ÿà¥‡à¤¬à¤²",serviceTypeLabel:"à¤¸à¥‡à¤µà¤¾",dineInLabel:"à¤¡à¤¾à¤‡à¤¨-à¤‡à¤¨"},te={loading:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤²à¥‹à¤¡ à¤¹à¥‹à¤¤ à¤†à¤¹à¥‡...",orderSummary:"à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶",totalItems:"à¤à¤•à¥‚à¤£ à¤µà¤¸à¥à¤¤à¥‚:",subtotal:"à¤‰à¤ª-à¤à¤•à¥‚à¤£:",gst:"à¤œà¥€à¤à¤¸à¤Ÿà¥€ (5%):",total:"à¤à¤•à¥‚à¤£:",cookingInstructions:"à¤¸à¥à¤µà¤¯à¤‚à¤ªà¤¾à¤•à¤¾à¤šà¥à¤¯à¤¾ à¤¸à¥‚à¤šà¤¨à¤¾",placeholderRequests:"à¤•à¥‹à¤£à¤¤à¥€à¤¹à¥€ à¤µà¤¿à¤¶à¥‡à¤· à¤µà¤¿à¤¨à¤‚à¤¤à¥€...",confirmOrder:"à¤‘à¤°à¥à¤¡à¤° à¤¨à¤¿à¤¶à¥à¤šà¤¿à¤¤ à¤•à¤°à¤¾",viewBill:"à¤¬à¤¿à¤² à¤ªà¤¹à¤¾",orderId:"à¤‘à¤°à¥à¤¡à¤° à¤†à¤¯à¤¡à¥€:",tableNumber:"à¤Ÿà¥‡à¤¬à¤² à¤•à¥à¤°à¤®à¤¾à¤‚à¤•:",close:"à¤¬à¤‚à¤¦ à¤•à¤°à¤¾",noOrderFound:"âŒ à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤ªà¤¡à¤²à¤¾ à¤¨à¤¾à¤¹à¥€!",fetchFailed:"âŒ à¤‘à¤°à¥à¤¡à¤° à¤¸à¤¾à¤°à¤¾à¤‚à¤¶ à¤†à¤£à¤£à¥à¤¯à¤¾à¤¤ à¤…à¤¯à¤¶à¤¸à¥à¤µà¥€.",restaurantName:"à¤Ÿà¥‡à¤°à¤¾ à¤•à¤¾à¤°à¥à¤Ÿ",address:`à¤¸à¥€-à¤¸à¥à¤•à¥à¤µà¥‡à¤…à¤°, à¤¦à¤¿à¤‚à¤¡à¥‹à¤°à¥€ à¤°à¥‹à¤¡,
à¤†à¤•à¤¾à¤¶ à¤ªà¥‡à¤Ÿà¥à¤°à¥‹à¤² à¤ªà¤‚à¤ª à¤¸à¤®à¥‹à¤°,
à¤•à¤²à¤¾à¤¨à¤—à¤°, à¤¨à¤¾à¤¶à¤¿à¤•,
à¤®à¤¹à¤¾à¤°à¤¾à¤·à¥à¤Ÿà¥à¤° 422004`,takeawayLabel:"à¤ªà¤¾à¤°à¥à¤¸à¤²",tableLabel:"à¤Ÿà¥‡à¤¬à¤²",serviceTypeLabel:"à¤¸à¥‡à¤µà¤¾",dineInLabel:"à¤¡à¤¾à¤‡à¤¨-à¤‡à¤¨"},ne={loading:"àª“àª°à«àª¡àª° àª¸àª¾àª°àª¾àª‚àª¶ àª²à«‹àª¡ àª¥àªˆ àª°àª¹à«àª¯à«‹ àª›à«‡...",orderSummary:"àª“àª°à«àª¡àª° àª¸àª¾àª°àª¾àª‚àª¶",totalItems:"àª•à«àª² àªµàª¸à«àª¤à«àª“:",subtotal:"àª‰àªªàª•à«àª²:",gst:"àªœà«€àªàª¸àªŸà«€ (5%):",total:"àª•à«àª²:",cookingInstructions:"àª°àª¸à«‹àªˆ àª¸à«àªšàª¨àª¾àª“",placeholderRequests:"àª•à«‹àªˆ àª–àª¾àª¸ àªµàª¿àª¨àª‚àª¤à«€àª“...",confirmOrder:"àª“àª°à«àª¡àª° àªªà«àª·à«àªŸàª¿ àª•àª°à«‹",viewBill:"àª¬àª¿àª² àªœà«àª“",orderId:"àª“àª°à«àª¡àª° àª†àª‡àª¡à«€:",tableNumber:"àªŸà«‡àª¬àª² àª¨àª‚àª¬àª°:",close:"àª¬àª‚àª§ àª•àª°à«‹",noOrderFound:"âŒ àª•à«‹àªˆ àª“àª°à«àª¡àª° àª®àª³à«àª¯à«‹ àª¨àª¥à«€!",fetchFailed:"âŒ àª“àª°à«àª¡àª° àª¸àª¾àª°àª¾àª‚àª¶ àª®à«‡àª³àªµàªµàª¾àª®àª¾àª‚ àª¨àª¿àª·à«àª«àª³.",restaurantName:"àªŸà«‡àª°àª¾ àª•àª¾àª°à«àªŸ",address:`àª¸à«€-àª¸à«àª•à«àªµà«‡àª°, àª¦àª¿àª‚àª¡à«‹àª°à«€ àª°à«‹àª¡,
àª†àª•àª¾àª¶ àªªà«‡àªŸà«àª°à«‹àª² àªªàª‚àªª àª¸àª¾àª®à«‡,
àª•àª²àª¾àª¨àª—àª°, àª¨àª¾àª¸àª¿àª•,
àª®àª¹àª¾àª°àª¾àª·à«àªŸà«àª° 422004`,takeawayLabel:"àªªàª¾àª°à«àª¸àª²",tableLabel:"àªŸà«‡àª¬àª²",serviceTypeLabel:"àª¸à«‡àªµàª¾",dineInLabel:"àª¡àª¾àª‡àª¨-àª‡àª¨"},j={en:ae,hi:se,mr:te,gu:ne},M="https://api.terracart.in".replace(/\/$/,""),W=(t=[])=>{const r={};return t.forEach(c=>{(c?.items||[]).forEach(i=>{if(!i)return;const h=i.name||"Item";r[h]||(r[h]={name:h,quantity:0,returnedQuantity:0,price:i.price||0,returned:!1});const p=r[h];i.returned?(p.returnedQuantity+=Number(i.quantity)||0,p.returned=!0):p.quantity+=Number(i.quantity)||0,!p.price&&i.price&&(p.price=i.price)})}),Object.values(r)},oe=t=>{const r=t.reduce((p,A)=>{const N=Number(A.price)||0,v=Number(A.quantity)||0;return p+N*v},0),c=Number((r/100).toFixed(2));return{subtotal:c,gst:0,totalAmount:c}},ce=(t=[])=>{const r=W(t);return oe(r)},ie=t=>{if(!t)return"INV-NA";const r=new Date(t.createdAt||Date.now()).toISOString().slice(0,10).replace(/-/g,""),c=(t.cartId||t._id||"").toString().slice(-6).toUpperCase();return`INV-${r}-${c}`},y=t=>{const r=Number(t);return Number.isNaN(r)?"0.00":r.toFixed(2)},le=t=>!t||!t.id?null:{employeeId:t.id,employeeName:t.name||null,employeeRole:t.role||null,disability:{hasDisability:!!t.disability,type:t.disability||null},acceptedAt:t.acceptedAt||null};function Ie(){const t=z(),[r,c]=x.useState(null),[i,h]=x.useState(!1),[p,A]=x.useState(!1),[N,v]=x.useState(!1),T=x.useRef(null),[H]=x.useState(localStorage.getItem("accessibilityMode")==="true"),_={Pending:"ðŸ“ Order is being processed...",Accepted:"âœ… Your order has been accepted! A staff member is assisting you.",Confirmed:"ðŸ‘¨â€ðŸ³ Order confirmed! Kitchen is getting ready.",Preparing:"ðŸ”¥ Your food is being prepared","Being Prepared":"ðŸ”¥ Your food is being prepared",BeingPrepared:"ðŸ”¥ Your food is being prepared",Ready:"âœ¨ Your food is ready to be served",Completed:"ðŸ“¦ Your order is ready for pickup!",Served:"ðŸ½ï¸ Enjoy your meal!",Finalized:"ðŸ“‹ Order completed, preparing bill",Paid:"âœ… Thank you for dining with us!",Cancelled:"âŒ Order has been cancelled",Returned:"â†©ï¸ Order has been returned. Please contact staff if you need assistance."},f=localStorage.getItem("language")||"en",n=s=>j[f]?.[s]||s,C=localStorage.getItem("terra_serviceType")||"DINE_IN",g=C==="TAKEAWAY"?localStorage.getItem("terra_orderId_TAKEAWAY")||localStorage.getItem("terra_orderId"):localStorage.getItem("terra_orderId_DINE_IN")||localStorage.getItem("terra_orderId");if(console.log("[OrderSummary] Loading order:",{serviceType:C,orderId:g,fromStorage:{generic:localStorage.getItem("terra_orderId"),dineIn:localStorage.getItem("terra_orderId_DINE_IN"),takeaway:localStorage.getItem("terra_orderId_TAKEAWAY")}}),x.useEffect(()=>{if(!g)return;const s=async()=>{try{const a=await fetch(`${M}/api/orders/${g}`);if(!a.ok){if(a.status===404)return alert(j[f]?.noOrderFound||"No order found"),t("/menu"),null;throw new Error(`Failed to fetch order: ${a.status}`)}const d=await a.json();return d?(c(d),d.status==="Cancelled"||d.status==="Returned"?(localStorage.removeItem("terra_orderId"),localStorage.removeItem("terra_cart"),localStorage.removeItem("terra_orderId_TAKEAWAY"),localStorage.removeItem("terra_orderId_DINE_IN"),alert(d.status==="Returned"?"Order has been returned.":j[f]?.orderCancelled||"Order cancelled"),t("/menu"),null):d):(alert(j[f]?.noOrderFound||"No order found"),null)}catch(a){return console.error("Error fetching order:",a),alert(j[f]?.noOrderFound||"No order found"),null}},l=a=>{a?._id===g&&(c(a),(a.status==="Cancelled"||a.status==="Returned")&&(localStorage.removeItem("terra_orderId"),localStorage.removeItem("terra_cart"),localStorage.removeItem("terra_orderId_TAKEAWAY"),localStorage.removeItem("terra_orderId_DINE_IN"),alert(a.status==="Returned"?"Order has been returned.":j[f]?.orderCancelled||"Order cancelled"),t("/menu")))},u=a=>{if(!a)return;const d=a.orderId||a.order?._id||a.order?.id;if(String(d||"")===String(g||"")){if(a.order&&typeof a.order=="object"){c({...a.order,assignedStaff:a.assignedStaff||a.order.assignedStaff||null});return}a.assignedStaff&&c(b=>b&&{...b,status:a.status||b.status,assignedStaff:a.assignedStaff,acceptedBy:le(a.assignedStaff)||b.acceptedBy})}};let o=null;try{o=Z(M,{transports:["polling","websocket"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4,autoConnect:!0,forceNew:!1}),o.on("connect",()=>{console.log("[OrderSummary] Socket connected")}),s().then(a=>{a?.cartId&&o&&o.emit("join:cart",a.cartId.toString())}),o.on("connect_error",a=>{a.message&&!a.message.includes("xhr poll error")&&console.warn("[OrderSummary] Socket connection error:",a.message)}),o.on("disconnect",a=>{a!=="io client disconnect"&&console.log("[OrderSummary] Socket disconnected:",a)}),o.on("orderUpdated",l),o.on("ORDER_ACCEPTED",u)}catch(a){console.warn("[OrderSummary] Failed to create socket connection:",a)}return()=>{o&&(o.off("orderUpdated",l),o.off("ORDER_ACCEPTED",u),o.off("connect"),o.off("connect_error"),o.off("disconnect"),o.disconnect(),o=null)}},[g,f,t]),!r)return e.jsx("div",{className:"order-summary-page loading-screen",children:n("loading")});const I=W(r.kotLines),S=ce(r.kotLines),L=I.reduce((s,l)=>s+l.quantity,0),m=r.serviceType==="TAKEAWAY",E=r.table?.number??r.tableNumber??"â€”",w=r.table?.name,R=n(m?"takeawayLabel":"dineInLabel"),D=ie(r),F=r.acceptedBy?.employeeName||r.assignedStaff?.name,P=r.assignedStaff?.role||r.acceptedBy?.employeeRole,q=r.acceptedBy?.disability?.type||r.assignedStaff?.disability,K=async()=>{if(!(!T.current||N)){v(!0);try{const s=await ee(T.current,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff",onclone:U=>{U.querySelectorAll("*").forEach(O=>{const V=window.getComputedStyle(O);["color","backgroundColor","borderColor"].forEach(k=>{const $=V[k];$&&$.includes("oklch")&&(O.style[k]="#000000",k==="backgroundColor"&&(O.style[k]="transparent"))})})}}),l=s.toDataURL("image/png"),u=80,o=4,a=u-o*2,d=s.width,B=s.height/d,Q=a*B+o*2,Y=new re({orientation:"portrait",unit:"mm",format:[u,Q]});Y.addImage(l,"PNG",o,o,a,a*B),Y.save(`${D}.pdf`)}catch(s){console.error("Invoice download failed (Detailed):",s),alert(`Failed to generate PDF: ${s.message||"Unknown error"}`)}finally{v(!1)}}};return e.jsxs("div",{className:`order-summary-page ${H?"accessibility":""}`,children:[e.jsxs("div",{className:"background-container",children:[e.jsx("img",{src:G,alt:n("restaurantName"),className:"background-image"}),e.jsx("div",{className:"background-overlay"})]}),e.jsxs("div",{className:"content-wrapper",children:[e.jsx(J,{}),e.jsx("div",{className:"main-content",children:e.jsxs("div",{className:"summary-card",children:[e.jsx("h2",{className:"summary-title",children:n("orderSummary")}),e.jsxs("div",{className:"order-meta",children:[e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:n("orderId")}),e.jsx("span",{children:r._id||"â€”"})]}),m&&r.takeawayToken&&e.jsxs("div",{className:"order-meta-row",style:{backgroundColor:"#dbeafe",padding:"8px",borderRadius:"8px",marginBottom:"8px"},children:[e.jsx("span",{style:{fontWeight:"600",color:"#1e40af"},children:"Token:"}),e.jsx("span",{style:{fontSize:"1.2em",fontWeight:"bold",color:"#2563eb"},children:r.takeawayToken})]}),!m&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:n("serviceTypeLabel")}),e.jsx("span",{children:R})]}),!m&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:n("tableLabel")}),e.jsxs("span",{children:[E,w?` Â· ${w}`:""]})]}),m&&(r.customerName||r.customerMobile)&&e.jsxs(e.Fragment,{children:[r.customerName&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:"Customer Name:"}),e.jsx("span",{children:r.customerName})]}),r.customerMobile&&e.jsxs("div",{className:"order-meta-row",children:[e.jsx("span",{children:"Mobile:"}),e.jsx("span",{children:r.customerMobile})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(X,{status:r.status,serviceType:r.serviceType,className:"mb-2"}),e.jsx("p",{className:"text-lg text-center font-medium text-gray-700",children:_[r.status]||_.Pending}),F&&e.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg text-center",children:[e.jsxs("p",{className:"text-green-800 font-medium",children:["Your order has been accepted by ",F]}),P&&e.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:["Role: ",P]}),q&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Your server has indicated: ",q]})]})]}),e.jsx("div",{className:"items-list",children:I.map(s=>{const u=(s.price||0)/100*(s.quantity||0);return e.jsxs("div",{className:"item-row",children:[e.jsxs("span",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{children:[s.name,s.quantity>0?` Ã— ${s.quantity}`:""]}),s.returned&&e.jsxs("span",{className:"meta-chip returned-chip",children:["Returned ",s.returnedQuantity]})]}),e.jsx("span",{children:s.quantity>0?`â‚¹${y(u)}`:"Returned"})]},s.name)})}),e.jsxs("div",{className:"summary-totals",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:n("totalItems")}),e.jsx("span",{children:L})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("span",{children:n("subtotal")}),e.jsxs("span",{children:["â‚¹",S.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"total-row total-bold",children:[e.jsx("span",{children:n("total")}),e.jsxs("span",{children:["â‚¹",S.totalAmount.toFixed(2)]})]})]}),e.jsxs("div",{className:"buttons-row",children:[e.jsx("button",{onClick:()=>t("/menu"),className:"primary-btn",children:n("confirmOrder")}),e.jsx("button",{onClick:()=>h(!0),className:"secondary-btn",children:n("viewBill")})]})]})})]}),i&&e.jsx("div",{className:"bill-modal-overlay",children:e.jsxs("div",{className:"bill-modal",children:[e.jsxs("div",{className:"bill-modal-header",children:[e.jsxs("div",{children:[e.jsx("h3",{children:"Invoice"}),e.jsxs("p",{className:"invoice-meta",children:[e.jsxs("span",{children:[n("orderId")," ",r._id]}),e.jsx("span",{children:new Date(r.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"bill-modal-actions",children:[e.jsx("button",{onClick:K,disabled:N,className:"invoice-action-btn download",children:N?"Preparingâ€¦":"Download"}),e.jsx("button",{onClick:()=>h(!1),className:"invoice-close-btn",children:"âœ•"})]})]}),e.jsxs("div",{ref:T,className:"invoice-preview",children:[e.jsxs("div",{className:"invoice-top",children:[e.jsxs("div",{children:[e.jsx("div",{className:"brand-name",children:r.cafe?.cafeName||r.cafe?.name||"Terra Cart"}),e.jsx("div",{className:"brand-address",children:r.cafe?.address||r.franchise?.address||"â€”"}),(r.franchise?.fssaiNumber||r.franchise?.fssai||r.cafe?.fssaiNumber||r.cafe?.fssai)&&e.jsxs("div",{className:"brand-address",children:["FSSAI No:"," ",r.franchise?.fssaiNumber||r.franchise?.fssai||r.cafe?.fssaiNumber||r.cafe?.fssai]}),(r.franchise?.gstNumber||r.cafe?.gstNumber)&&e.jsxs("div",{className:"brand-address",children:["FSSAI No:"," ",r.franchise?.gstNumber||r.cafe?.gstNumber]})]}),e.jsxs("div",{className:"invoice-meta-block",children:[e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Invoice No:"}),e.jsx("span",{children:D})]}),m&&r.takeawayToken&&e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Token:"}),e.jsx("span",{className:"font-bold text-blue-600",children:r.takeawayToken})]}),e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{children:new Date(r.paidAt||r.updatedAt||r.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Time:"}),e.jsx("span",{children:new Date(r.paidAt||r.updatedAt||r.createdAt).toLocaleTimeString()})]})]})]}),e.jsxs("div",{className:"invoice-billed",children:[!m&&e.jsxs("div",{className:"meta-line",children:[e.jsxs("span",{children:[n("serviceTypeLabel"),":"]}),e.jsx("span",{children:R})]}),!m&&e.jsxs("div",{className:"meta-line",children:[e.jsxs("span",{children:[n("tableLabel"),":"]}),e.jsxs("span",{children:[E,w?` Â· ${w}`:""]})]}),m&&(r.customerName||r.customerMobile)&&e.jsxs(e.Fragment,{children:[r.customerName&&e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Customer Name:"}),e.jsx("span",{children:r.customerName})]}),r.customerMobile&&e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:"Mobile Number:"}),e.jsx("span",{children:r.customerMobile})]})]})]}),e.jsxs("table",{className:"invoice-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:n("itemHeader")||"Item"}),e.jsx("th",{children:n("quantityHeader")||"Qty"}),e.jsx("th",{children:n("priceHeader")||"Price (â‚¹)"}),e.jsx("th",{className:"align-right",children:n("amountHeader")||"Amount (â‚¹)"})]})}),e.jsx("tbody",{children:I.length>0?I.map(s=>{const l=(s.price||0)/100,u=l*(s.quantity||0);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{children:s.name}),s.returned&&e.jsxs("span",{className:"invoice-returned-note",children:["Returned ",s.returnedQuantity]})]})}),e.jsx("td",{children:s.quantity>0?s.quantity:"â€”"}),e.jsxs("td",{children:["â‚¹",y(l)]}),e.jsx("td",{className:"align-right",children:s.quantity>0?`â‚¹${y(u)}`:"Returned"})]},s.name)}):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"empty-row",children:"No items found"})})})]}),e.jsxs("div",{className:"invoice-totals",children:[e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:n("totalItems")}),e.jsx("span",{children:L})]}),e.jsxs("div",{className:"meta-line",children:[e.jsx("span",{children:n("subtotal")}),e.jsxs("span",{children:["â‚¹",y(S.subtotal)]})]}),e.jsxs("div",{className:"meta-line total",children:[e.jsx("span",{children:n("total")}),e.jsxs("span",{children:["â‚¹",y(S.totalAmount)]})]})]}),e.jsx("div",{className:"invoice-footer",children:"Thank you for dining with Terra Cart. We hope to see you again!"})]})]})})]})}export{Ie as default};
