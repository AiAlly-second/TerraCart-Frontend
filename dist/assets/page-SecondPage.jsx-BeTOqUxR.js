import{r as u,j as e,o as Qe,p as Ge,q as He,u as Xe}from"./vendor-react-BMxAjtiD.js";import{l as Pe}from"./vendor-socket-DJ_CsPWr.js";import{H as Ze,r as et}from"./page-Billing.jsx-CXD1st4q.js";import{b as tt}from"./page-Landing.jsx-ByDaWIKS.js";/* empty css                            */import{m as at}from"./vendor-motion-iT52ZrD2.js";const rt={dineIn:"Dine-In",takeAway:"Takeaway",toggleAccessibility:"Toggle Accessibility Mode",waitlistTitle:"Table is currently occupied",waitlistDescription:"The table is busy right now. Join the waitlist and we will notify you when it's ready.",waitlistJoin:"Join Waitlist",waitlistJoining:"Joining...",waitlistNotNow:"Maybe later",waitlistActiveTitle:"You are on the waitlist",waitlistStatusLabel:"Status",waitlistStatusWaiting:"Waiting",waitlistStatusNotified:"Ready for you",waitlistStatusSeated:"Seated",waitlistStatusCancelled:"Cancelled",waitlistPosition:"Your position: {position}",waitlistInstructions:"Please stay nearby. We will alert you once the table is ready.",waitlistReadyButton:"I'm here",waitlistCancel:"Leave waitlist",waitlistRefresh:"Refresh status",waitlistLeaveConfirm:"Leave the waitlist?",waitlistLoading:"Checking your waitlist status...",waitlistQueueCount:"People waiting: {count}",waitlistPartyLabel:"Party of {size}",waitlistMoreCount:"+ {count} more waiting",customerInfoTitle:"Customer Information (Required)",customerInfoDescTakeaway:"Please provide your details for the takeaway order. Name and mobile number are required.",customerInfoDescPickup:"Please provide your details for the pickup order. Name and mobile number are required.",customerInfoDescDelivery:"Please provide your details for the delivery order. Name and mobile number are required.",chooseOrderType:"Choose Order Type",pickupOption:"Pickup",pickupDesc:"Order and collect from store",deliveryOption:"Delivery",deliveryDesc:"Get your order delivered",nameLabel:"Name (Required)",namePlaceholder:"Enter your name",mobileLabel:"Mobile Number (Required)",mobilePlaceholder:"Enter mobile number",emailLabel:"Email (Optional)",emailPlaceholder:"Enter email address",specialInstructionsLabel:"Special Instructions (Optional)",specialInstructionsPlaceholder:"e.g., No onion, Urgent pickup, Leave at door",continueButton:"Continue"},ot={dineIn:"à¤°à¥‡à¤¸à¥à¤Ÿà¥‹à¤°à¥‡à¤‚à¤Ÿ à¤®à¥‡à¤‚ à¤–à¤¾à¤¨à¤¾",takeAway:"à¤ªà¤¾à¤°à¥à¤¸à¤² à¤²à¥‡à¤‚",toggleAccessibility:"à¤¸à¥à¤—à¤®à¥à¤¯à¤¤à¤¾ à¤®à¥‹à¤¡ à¤¬à¤¦à¤²à¥‡à¤‚",waitlistTitle:"à¤Ÿà¥‡à¤¬à¤² à¤µà¤°à¥à¤¤à¤®à¤¾à¤¨ à¤®à¥‡à¤‚ à¤µà¥à¤¯à¤¸à¥à¤¤ à¤¹à¥ˆ",waitlistDescription:"à¤Ÿà¥‡à¤¬à¤² à¤…à¤­à¥€ à¤µà¥à¤¯à¤¸à¥à¤¤ à¤¹à¥ˆà¥¤ à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥‚à¤šà¥€ à¤®à¥‡à¤‚ à¤œà¥à¤¡à¤¼à¥‡à¤‚ à¤”à¤° à¤¤à¥ˆà¤¯à¤¾à¤° à¤¹à¥‹à¤¨à¥‡ à¤ªà¤° à¤¸à¥‚à¤šà¤¨à¤¾ à¤®à¤¿à¤²à¥‡à¤—à¥€à¥¤",waitlistJoin:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥‚à¤šà¥€ à¤®à¥‡à¤‚ à¤œà¥à¤¡à¤¼à¥‡à¤‚",waitlistJoining:"à¤œà¥à¤¡à¤¼ à¤°à¤¹à¤¾ à¤¹à¥ˆ...",waitlistNotNow:"à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚",waitlistActiveTitle:"à¤†à¤ª à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥‚à¤šà¥€ à¤®à¥‡à¤‚ à¤¹à¥ˆà¤‚",waitlistStatusLabel:"à¤¸à¥à¤¥à¤¿à¤¤à¤¿",waitlistStatusWaiting:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤®à¥‡à¤‚",waitlistStatusNotified:"à¤†à¤ªà¤•à¥‡ à¤²à¤¿à¤ à¤¤à¥ˆà¤¯à¤¾à¤°",waitlistStatusSeated:"à¤¬à¥ˆà¤  à¤šà¥à¤•à¥‡",waitlistStatusCancelled:"à¤°à¤¦à¥à¤¦",waitlistPosition:"à¤†à¤ªà¤•à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¤¿: {position}",waitlistInstructions:"à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¤¾à¤¸ à¤¹à¥€ à¤°à¤¹à¥‡à¤‚à¥¤ à¤Ÿà¥‡à¤¬à¤² à¤¤à¥ˆà¤¯à¤¾à¤° à¤¹à¥‹à¤¤à¥‡ à¤¹à¥€ à¤¸à¥‚à¤šà¤¨à¤¾ à¤®à¤¿à¤²à¥‡à¤—à¥€à¥¤",waitlistReadyButton:"à¤®à¥ˆà¤‚ à¤¯à¤¹à¤¾à¤‚ à¤¹à¥‚à¤",waitlistCancel:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥‚à¤šà¥€ à¤›à¥‹à¤¡à¤¼à¥‡à¤‚",waitlistRefresh:"à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤¤à¤¾à¤œà¤¼à¤¾ à¤•à¤°à¥‡à¤‚",waitlistLeaveConfirm:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥‚à¤šà¥€ à¤›à¥‹à¤¡à¤¼à¥‡à¤‚?",waitlistLoading:"à¤†à¤ªà¤•à¥€ à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤œà¤¾à¤‚à¤šà¥€ à¤œà¤¾ à¤°à¤¹à¥€ à¤¹à¥ˆ...",waitlistQueueCount:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤•à¤° à¤°à¤¹à¥‡ à¤²à¥‹à¤—: {count}",waitlistPartyLabel:"{size} à¤²à¥‹à¤—à¥‹à¤‚ à¤•à¤¾ à¤¸à¤®à¥‚à¤¹",waitlistMoreCount:"à¤…à¤¤à¤¿à¤°à¤¿à¤•à¥à¤¤ {count} à¤²à¥‹à¤— à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤®à¥‡à¤‚",customerInfoTitle:"à¤—à¥à¤°à¤¾à¤¹à¤• à¤œà¤¾à¤¨à¤•à¤¾à¤°à¥€ (à¤…à¤¨à¤¿à¤µà¤¾à¤°à¥à¤¯)",customerInfoDescTakeaway:"à¤ªà¤¾à¤°à¥à¤¸à¤² à¤‘à¤°à¥à¤¡à¤° à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤ªà¤¨à¤¾ à¤µà¤¿à¤µà¤°à¤£ à¤¦à¥‡à¤‚à¥¤ à¤¨à¤¾à¤® à¤”à¤° à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤…à¤¨à¤¿à¤µà¤¾à¤°à¥à¤¯ à¤¹à¥ˆà¥¤",customerInfoDescPickup:"à¤ªà¤¿à¤•à¤…à¤ª à¤‘à¤°à¥à¤¡à¤° à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤ªà¤¨à¤¾ à¤µà¤¿à¤µà¤°à¤£ à¤¦à¥‡à¤‚à¥¤ à¤¨à¤¾à¤® à¤”à¤° à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤…à¤¨à¤¿à¤µà¤¾à¤°à¥à¤¯ à¤¹à¥ˆà¥¤",customerInfoDescDelivery:"à¤¡à¤¿à¤²à¥€à¤µà¤°à¥€ à¤‘à¤°à¥à¤¡à¤° à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤ªà¤¨à¤¾ à¤µà¤¿à¤µà¤°à¤£ à¤¦à¥‡à¤‚à¥¤ à¤¨à¤¾à¤® à¤”à¤° à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤…à¤¨à¤¿à¤µà¤¾à¤°à¥à¤¯ à¤¹à¥ˆà¥¤",chooseOrderType:"à¤‘à¤°à¥à¤¡à¤° à¤•à¤¾ à¤ªà¥à¤°à¤•à¤¾à¤° à¤šà¥à¤¨à¥‡à¤‚",pickupOption:"à¤ªà¤¿à¤•à¤…à¤ª",pickupDesc:"à¤¦à¥à¤•à¤¾à¤¨ à¤¸à¥‡ à¤‘à¤°à¥à¤¡à¤° à¤•à¤²à¥‡à¤•à¥à¤Ÿ à¤•à¤°à¥‡à¤‚",deliveryOption:"à¤¡à¤¿à¤²à¥€à¤µà¤°à¥€",deliveryDesc:"à¤…à¤ªà¤¨à¤¾ à¤‘à¤°à¥à¤¡à¤° à¤¡à¤¿à¤²à¥€à¤µà¤° à¤•à¤°à¤µà¤¾à¤à¤‚",nameLabel:"à¤¨à¤¾à¤® (à¤…à¤¨à¤¿à¤µà¤¾à¤°à¥à¤¯)",namePlaceholder:"à¤…à¤ªà¤¨à¤¾ à¤¨à¤¾à¤® à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",mobileLabel:"à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° (à¤…à¤¨à¤¿à¤µà¤¾à¤°à¥à¤¯)",mobilePlaceholder:"à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",emailLabel:"à¤ˆà¤®à¥‡à¤² (à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•)",emailPlaceholder:"à¤ˆà¤®à¥‡à¤² à¤ªà¤¤à¤¾ à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚",specialInstructionsLabel:"à¤µà¤¿à¤¶à¥‡à¤· à¤¨à¤¿à¤°à¥à¤¦à¥‡à¤¶ (à¤µà¥ˆà¤•à¤²à¥à¤ªà¤¿à¤•)",specialInstructionsPlaceholder:"à¤œà¥ˆà¤¸à¥‡: à¤ªà¥à¤¯à¤¾à¤œ à¤¨à¤¹à¥€à¤‚, à¤¤à¥à¤°à¤‚à¤¤ à¤ªà¤¿à¤•à¤…à¤ª, à¤¦à¤°à¤µà¤¾à¤œà¥‡ à¤ªà¤° à¤›à¥‹à¤¡à¤¼à¥‡à¤‚",continueButton:"à¤œà¤¾à¤°à¥€ à¤°à¤–à¥‡à¤‚"},st={dineIn:"à¤°à¥‡à¤¸à¥à¤Ÿà¥‰à¤°à¤‚à¤Ÿà¤®à¤§à¥à¤¯à¥‡ à¤œà¥‡à¤µà¤£",takeAway:"à¤ªà¤¾à¤°à¥à¤¸à¤² à¤˜à¥à¤¯à¤¾",toggleAccessibility:"à¥²à¤•à¥à¤¸à¥‡à¤¸à¤¿à¤¬à¤¿à¤²à¤¿à¤Ÿà¥€ à¤®à¥‹à¤¡ à¤¬à¤¦à¤²à¤¾",waitlistTitle:"à¤Ÿà¥‡à¤¬à¤² à¤¸à¤§à¥à¤¯à¤¾ à¤µà¥à¤¯à¤¸à¥à¤¤ à¤†à¤¹à¥‡",waitlistDescription:"à¤Ÿà¥‡à¤¬à¤² à¤¸à¤§à¥à¤¯à¤¾ à¤µà¥à¤¯à¤¸à¥à¤¤ à¤†à¤¹à¥‡. à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¯à¤¾à¤¦à¥€à¤¤ à¤¸à¤¾à¤®à¥€à¤² à¤µà¥à¤¹à¤¾; à¤¤à¤¯à¤¾à¤° à¤à¤¾à¤²à¥à¤¯à¤¾à¤µà¤° à¤¸à¥‚à¤šà¤¨à¤¾ à¤®à¤¿à¤³à¥‡à¤².",waitlistJoin:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¯à¤¾à¤¦à¥€à¤¤ à¤¸à¤¾à¤®à¥€à¤² à¤µà¥à¤¹à¤¾",waitlistJoining:"à¤œà¥‹à¤¡à¤¤ à¤†à¤¹à¥‡...",waitlistNotNow:"à¤¨à¤‚à¤¤à¤°",waitlistActiveTitle:"à¤†à¤ªà¤£ à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¯à¤¾à¤¦à¥€à¤¤ à¤†à¤¹à¤¾à¤¤",waitlistStatusLabel:"à¤¸à¥à¤¥à¤¿à¤¤à¥€",waitlistStatusWaiting:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾",waitlistStatusNotified:"à¤†à¤ªà¤²à¥à¤¯à¤¾à¤¸à¤¾à¤ à¥€ à¤¤à¤¯à¤¾à¤°",waitlistStatusSeated:"à¤†à¤¸à¤¨ à¤®à¤¿à¤³à¤¾à¤²à¥‡",waitlistStatusCancelled:"à¤°à¤¦à¥à¤¦",waitlistPosition:"à¤†à¤ªà¤²à¥€ à¤¸à¥à¤¥à¤¿à¤¤à¥€: {position}",waitlistInstructions:"à¤•à¥ƒà¤ªà¤¯à¤¾ à¤œà¤µà¤³à¤š à¤¥à¤¾à¤‚à¤¬à¤¾. à¤Ÿà¥‡à¤¬à¤² à¤¤à¤¯à¤¾à¤° à¤¹à¥‹à¤¤à¤¾à¤š à¤¸à¥‚à¤šà¤¨à¤¾ à¤¦à¤¿à¤²à¥€ à¤œà¤¾à¤ˆà¤².",waitlistReadyButton:"à¤®à¥€ à¤¯à¥‡à¤¥à¥‡ à¤†à¤¹à¥‡",waitlistCancel:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¯à¤¾à¤¦à¥€ à¤¸à¥‹à¤¡à¤¾",waitlistRefresh:"à¤¸à¥à¤¥à¤¿à¤¤à¥€ à¤¤à¤¾à¤œà¥€ à¤•à¤°à¤¾",waitlistLeaveConfirm:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¯à¤¾à¤¦à¥€ à¤¸à¥‹à¤¡à¤¾à¤¯à¤šà¥€?",waitlistLoading:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¤¾ à¤¸à¥à¤¥à¤¿à¤¤à¥€ à¤¤à¤ªà¤¾à¤¸à¤¤ à¤†à¤¹à¥‹à¤¤...",waitlistQueueCount:"à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¥‡à¤¤ à¤²à¥‹à¤•: {count}",waitlistPartyLabel:"{size} à¤œà¤£à¤¾à¤‚à¤šà¤¾ à¤—à¤Ÿ",waitlistMoreCount:"à¤†à¤£à¤–à¥€ {count} à¤ªà¥à¤°à¤¤à¥€à¤•à¥à¤·à¥‡à¤¤",customerInfoTitle:"à¤—à¥à¤°à¤¾à¤¹à¤• à¤®à¤¾à¤¹à¤¿à¤¤à¥€ (à¤†à¤µà¤¶à¥à¤¯à¤•)",customerInfoDescTakeaway:"à¤ªà¤¾à¤°à¥à¤¸à¤² à¤‘à¤°à¥à¤¡à¤°à¤¸à¤¾à¤ à¥€ à¤¤à¥à¤®à¤šà¤¾ à¤¤à¤ªà¤¶à¥€à¤² à¤¦à¥à¤¯à¤¾. à¤¨à¤¾à¤µ à¤†à¤£à¤¿ à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤†à¤µà¤¶à¥à¤¯à¤• à¤†à¤¹à¥‡.",customerInfoDescPickup:"à¤ªà¤¿à¤•à¤…à¤ª à¤‘à¤°à¥à¤¡à¤°à¤¸à¤¾à¤ à¥€ à¤¤à¥à¤®à¤šà¤¾ à¤¤à¤ªà¤¶à¥€à¤² à¤¦à¥à¤¯à¤¾. à¤¨à¤¾à¤µ à¤†à¤£à¤¿ à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤†à¤µà¤¶à¥à¤¯à¤• à¤†à¤¹à¥‡.",customerInfoDescDelivery:"à¤¡à¤¿à¤²à¤¿à¤µà¥à¤¹à¤°à¥€ à¤‘à¤°à¥à¤¡à¤°à¤¸à¤¾à¤ à¥€ à¤¤à¥à¤®à¤šà¤¾ à¤¤à¤ªà¤¶à¥€à¤² à¤¦à¥à¤¯à¤¾. à¤¨à¤¾à¤µ à¤†à¤£à¤¿ à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤†à¤µà¤¶à¥à¤¯à¤• à¤†à¤¹à¥‡.",chooseOrderType:"à¤‘à¤°à¥à¤¡à¤° à¤ªà¥à¤°à¤•à¤¾à¤° à¤¨à¤¿à¤µà¤¡à¤¾",pickupOption:"à¤ªà¤¿à¤•à¤…à¤ª",pickupDesc:"à¤¦à¥à¤•à¤¾à¤¨à¤¾à¤¤à¥‚à¤¨ à¤‘à¤°à¥à¤¡à¤° à¤˜à¥à¤¯à¤¾",deliveryOption:"à¤¡à¤¿à¤²à¤¿à¤µà¥à¤¹à¤°à¥€",deliveryDesc:"à¤¤à¥à¤®à¤šà¥€ à¤‘à¤°à¥à¤¡à¤° à¤˜à¤°à¤ªà¥‹à¤š à¤®à¤¿à¤³à¤µà¤¾",nameLabel:"à¤¨à¤¾à¤µ (à¤†à¤µà¤¶à¥à¤¯à¤•)",namePlaceholder:"à¤¤à¥à¤®à¤šà¥‡ à¤¨à¤¾à¤µ à¤Ÿà¤¾à¤•à¤¾",mobileLabel:"à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° (à¤†à¤µà¤¶à¥à¤¯à¤•)",mobilePlaceholder:"à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤¨à¤‚à¤¬à¤° à¤Ÿà¤¾à¤•à¤¾",emailLabel:"à¤ˆà¤®à¥‡à¤² (à¤ªà¤°à¥à¤¯à¤¾à¤¯à¥€)",emailPlaceholder:"à¤ˆà¤®à¥‡à¤² à¤ªà¤¤à¥à¤¤à¤¾ à¤Ÿà¤¾à¤•à¤¾",specialInstructionsLabel:"à¤µà¤¿à¤¶à¥‡à¤· à¤¸à¥‚à¤šà¤¨à¤¾ (à¤ªà¤°à¥à¤¯à¤¾à¤¯à¥€)",specialInstructionsPlaceholder:"à¤‰à¤¦à¤¾. à¤•à¤¾à¤‚à¤¦à¤¾ à¤¨à¤•à¥‹, à¤…à¤°à¥à¤œà¤‚à¤Ÿ à¤ªà¤¿à¤•à¤…à¤ª, à¤¦à¤¾à¤°à¤¾à¤¤ à¤ à¥‡à¤µà¤¾",continueButton:"à¤ªà¥à¤¢à¥‡ à¤šà¤²à¤¾"},nt={dineIn:"àª°à«‡àª¸à«àªŸà«‹àª°àª¨à«àªŸàª®àª¾àª‚ àª­à«‹àªœàª¨",takeAway:"àªªàª¾àª°à«àª¸àª² àª²à«‹",toggleAccessibility:"àªàª•à«àª¸à«‡àª¸àª¿àª¬àª¿àª²àª¿àªŸà«€ àª®à«‹àª¡ àª¬àª¦àª²à«‹",waitlistTitle:"àªŸà«‡àª¬àª² àª¹àª¾àª²àª®àª¾àª‚ àªµà«àª¯àª¸à«àª¤ àª›à«‡",waitlistDescription:"àªŸà«‡àª¬àª² àª¹àª¾àª²àª®àª¾àª‚ àªµà«àª¯àª¸à«àª¤ àª›à«‡. àª°àª¾àª¹ àª¸à«‚àªšà«€àª®àª¾àª‚ àªœà«‹àª¡àª¾àª“; àª¤à«ˆàª¯àª¾àª° àª¥àª¤àª¾àª¨à«€ àª¸àª¾àª¥à«‡ àª¤àª®àª¨à«‡ àªœàª¾àª£ àª•àª°à«€àª¶à«àª‚.",waitlistJoin:"àªµà«‡àªŸàª²àª¿àª¸à«àªŸàª®àª¾àª‚ àªœà«‹àª¡àª¾àª“",waitlistJoining:"àªœà«‹àª¡àª¾àªˆ àª°àª¹à«àª¯à«àª‚ àª›à«‡...",waitlistNotNow:"àªªàª›à«€",waitlistActiveTitle:"àª¤àª®à«‡ àªµà«‡àªŸàª²àª¿àª¸à«àªŸàª®àª¾àª‚ àª›à«‹",waitlistStatusLabel:"àª¸à«àª¥àª¿àª¤àª¿",waitlistStatusWaiting:"àª°àª¾àª¹àª®àª¾àª‚",waitlistStatusNotified:"àª¤àª®àª¾àª°àª¾ àª®àª¾àªŸà«‡ àª¤à«ˆàª¯àª¾àª°",waitlistStatusSeated:"àª¬à«‡àª à«‡àª²àª¾",waitlistStatusCancelled:"àª°àª¦",waitlistPosition:"àª¤àª®àª¾àª°à«€ àª¸à«àª¥àª¿àª¤àª¿: {position}",waitlistInstructions:"àª•à«ƒàªªàª¾ àª•àª°à«€àª¨à«‡ àª¨àªœà«€àª• àªœ àª°àª¹à«‹. àªŸà«‡àª¬àª² àª¤à«ˆàª¯àª¾àª° àª¥àª¤àª¾ àªœ àªœàª¾àª£ àª•àª°àªµàª¾àª®àª¾àª‚ àª†àªµàª¶à«‡.",waitlistReadyButton:"àª¹à«àª‚ àª†àªµà«€ àª—àª¯à«‹ àª›à«àª‚",waitlistCancel:"àªµà«‡àªŸàª²àª¿àª¸à«àªŸ àª›à«‹àª¡à«‹",waitlistRefresh:"àª¸à«àª¥àª¿àª¤àª¿ àª¤àª¾àªœà«€ àª•àª°à«‹",waitlistLeaveConfirm:"àªµà«‡àªŸàª²àª¿àª¸à«àªŸ àª›à«‹àª¡àªµà«àª‚ àª›à«‡?",waitlistLoading:"àª¤àª®àª¾àª°à«€ àªµà«‡àªŸàª²àª¿àª¸à«àªŸ àª¸à«àª¥àª¿àª¤àª¿ àª¤àªªàª¾àª¸à«€ àª°àª¹à«àª¯àª¾ àª›à«€àª...",waitlistQueueCount:"àª°àª¾àª¹àª®àª¾àª‚ àª²à«‹àª•à«‹: {count}",waitlistPartyLabel:"{size} àª²à«‹àª•à«‹àª¨à«‹ àª¸àª®à«‚àª¹",waitlistMoreCount:"àªµàª§à« {count} àª°àª¾àª¹àª®àª¾àª‚",customerInfoTitle:"àª—à«àª°àª¾àª¹àª• àª®àª¾àª¹àª¿àª¤à«€ (àª«àª°àªœàª¿àª¯àª¾àª¤)",customerInfoDescTakeaway:"àªªàª¾àª°à«àª¸àª² àª®àª¾àªŸà«‡ àª¤àª®àª¾àª°à«€ àªµàª¿àª—àª¤à«‹ àª†àªªà«‹. àª¨àª¾àª® àª…àª¨à«‡ àª®à«‹àª¬àª¾àªˆàª² àª¨àª‚àª¬àª° àª«àª°àªœàª¿àª¯àª¾àª¤ àª›à«‡.",customerInfoDescPickup:"àªªàª¿àª•àª…àªª àª“àª°à«àª¡àª° àª®àª¾àªŸà«‡ àª¤àª®àª¾àª°à«€ àªµàª¿àª—àª¤à«‹ àª†àªªà«‹. àª¨àª¾àª® àª…àª¨à«‡ àª®à«‹àª¬àª¾àªˆàª² àª¨àª‚àª¬àª° àª«àª°àªœàª¿àª¯àª¾àª¤ àª›à«‡.",customerInfoDescDelivery:"àª¡àª¿àª²àª¿àªµàª°à«€ àª“àª°à«àª¡àª° àª®àª¾àªŸà«‡ àª¤àª®àª¾àª°à«€ àªµàª¿àª—àª¤à«‹ àª†àªªà«‹. àª¨àª¾àª® àª…àª¨à«‡ àª®à«‹àª¬àª¾àªˆàª² àª¨àª‚àª¬àª° àª«àª°àªœàª¿àª¯àª¾àª¤ àª›à«‡.",chooseOrderType:"àª“àª°à«àª¡àª° àªªà«àª°àª•àª¾àª° àªªàª¸àª‚àª¦ àª•àª°à«‹",pickupOption:"àªªàª¿àª•àª…àªª",pickupDesc:"àª¦à«àª•àª¾àª¨àª®àª¾àª‚àª¥à«€ àª“àª°à«àª¡àª° àª®à«‡àª³àªµà«‹",deliveryOption:"àª¡àª¿àª²àª¿àªµàª°à«€",deliveryDesc:"àª¤àª®àª¾àª°à«‹ àª“àª°à«àª¡àª° àª˜àª°à«‡ àª®àª—àª¾àªµà«‹",nameLabel:"àª¨àª¾àª® (àª«àª°àªœàª¿àª¯àª¾àª¤)",namePlaceholder:"àª¤àª®àª¾àª°à«àª‚ àª¨àª¾àª® àª²àª–à«‹",mobileLabel:"àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª° (àª«àª°àªœàª¿àª¯àª¾àª¤)",mobilePlaceholder:"àª®à«‹àª¬àª¾àª‡àª² àª¨àª‚àª¬àª° àª²àª–à«‹",emailLabel:"àª‡àª®à«‡àª‡àª² (àªµà«ˆàª•àª²à«àªªàª¿àª•)",emailPlaceholder:"àª‡àª®à«‡àª‡àª² àª¸àª°àª¨àª¾àª®à«àª‚ àª²àª–à«‹",specialInstructionsLabel:"àª–àª¾àª¸ àª¸à«‚àªšàª¨àª¾àª“ (àªµà«ˆàª•àª²à«àªªàª¿àª•)",specialInstructionsPlaceholder:"àªœà«‡àª® àª•à«‡, àª¡à«àª‚àª—àª³à«€ àª¨àª¥à«€ àªœà«‹àªˆàª¤à«€, àª¤àª¾àª¤à«àª•àª¾àª²àª¿àª• àªªàª¿àª•àª…àªª",continueButton:"àªšàª¾àª²à« àª°àª¾àª–à«‹"},it={en:rt,hi:ot,mr:st,gu:nt};function lt(){const S=u.useRef(null),V=u.useRef(!1),N={en:{speechLang:"en-US",recognitionLang:"en-IN",voiceSearch:"en"},hi:{speechLang:"hi-IN",recognitionLang:"hi-IN",voiceSearch:"hi"},mr:{speechLang:"hi-IN",recognitionLang:"hi-IN",voiceSearch:"hi"},gu:{speechLang:"hi-IN",recognitionLang:"gu-IN",voiceSearch:"hi"}},M=()=>{if(!V.current){console.log("ðŸš€ Initializing speech synthesis...");const T=new SpeechSynthesisUtterance("");T.volume=0,window.speechSynthesis.speak(T),V.current=!0}},O=T=>{const d=window.speechSynthesis.getVoices(),L=N[T]||N.en;if(console.log(`ðŸ” Selecting voice for language: ${T}`),T==="en"){let c=d.find(y=>y.lang.startsWith("en")&&y.localService&&(y.name.toLowerCase().includes("female")||y.name.toLowerCase().includes("zira")||y.name.toLowerCase().includes("susan")||y.name.toLowerCase().includes("samantha")||y.name.toLowerCase().includes("karen")||y.name.toLowerCase().includes("moira")));if(c)return console.log(`âœ… Found female English voice: ${c.name} (${c.lang})`),c;if(c=d.find(y=>y.lang.startsWith("en")&&y.localService),c)return console.log(`âœ… Found local English voice: ${c.name} (${c.lang})`),c;if(c=d.find(y=>y.lang.startsWith("en")),c)return console.log(`âœ… Found English voice: ${c.name} (${c.lang})`),c}let n=d.find(c=>c.lang===L.speechLang&&c.localService);return n?(console.log(`âœ… Found exact local voice: ${n.name} (${n.lang})`),n):(n=d.find(c=>c.lang.startsWith(L.voiceSearch)&&c.localService),n?(console.log(`âœ… Found language family local voice: ${n.name} (${n.lang})`),n):(n=d.find(c=>c.lang.startsWith(L.voiceSearch)),n?(console.log(`âœ… Found online voice: ${n.name} (${n.lang})`),n):(n=d[0],console.log(`âš ï¸ Using fallback voice: ${n?.name} (${n?.lang})`),n)))},R=()=>({restaurant:["dine","dining","restaurant","eat","inside","à¤°à¥‡à¤¸à¥à¤Ÿà¥‹à¤°à¥‡à¤‚à¤Ÿ","à¤–à¤¾à¤¨à¤¾","à¤­à¥‹à¤œà¤¨","à¤…à¤‚à¤¦à¤°","à¤œà¥‡à¤µà¤£","à¤–à¤¾à¤£à¥‡","à¤°à¥‡à¤¸à¥à¤Ÿà¥‰à¤°à¤‚à¤Ÿ","à¤œà¥‡à¤µà¤£","à¤–à¤¾à¤£à¥‡","à¤­à¥‹à¤œà¤¨","à¤†à¤¤","àª°à«‡àª¸à«àªŸà«‹àª°àª¨à«àªŸ","àªœàª®àªµà«àª‚","àª–àª¾àªµà«àª‚","àª­à«‹àªœàª¨","àª°à«‡àª¸à«àªŸà«‹","àª…àª‚àª¦àª°","àª–àª¾àªµàª¾","àªœàª®àªµàª¾"],takeaway:["takeaway","take away","parcel","pickup","home","pack","outside","à¤ªà¥ˆà¤•à¥‡à¤Ÿ","à¤Ÿà¥‡à¤•à¤…à¤µà¥‡","à¤ªà¤¾à¤°à¥à¤¸à¤²","à¤˜à¤°","à¤¬à¤¾à¤¹à¤°","à¤ªà¥ˆà¤•","à¤ªà¥…à¤•à¥‡à¤Ÿ","à¤ªà¤¾à¤°à¥à¤¸à¤²","à¤˜à¤°","à¤¬à¤¾à¤¹à¥‡à¤°","à¤ªà¥…à¤•","àªªà«‡àª•à«‡àªŸ","àªªàª¾àª°à«àª¸àª²","àª˜àª°","àª¬àª¹àª¾àª°","àªªà«‡àª•","àª²à«‡àªµàª¾","àª²à«‡àªµàª¾àª¨à«àª‚","àª²àªˆ"]}),D=(T,d,L)=>{console.log(`ðŸ” Smart matching for language: ${L}`),console.log("ðŸ“ Transcripts to match:",T),console.log("ðŸŽ¯ Available commands:",Object.keys(d));const n=R();for(const c of T){console.log(`ðŸ” Processing transcript: "${c}"`);const y=n.restaurant.some(o=>{const C=c.includes(o.toLowerCase())||o.toLowerCase().includes(c)||c.includes(o)||o.includes(c);return C&&console.log(`âœ… Found restaurant keyword: "${o}" in "${c}"`),C}),_=n.takeaway.some(o=>{const C=c.includes(o.toLowerCase())||o.toLowerCase().includes(c)||c.includes(o)||o.includes(c);return C&&console.log(`âœ… Found takeaway keyword: "${o}" in "${c}"`),C});if(y)for(const[o,C]of Object.entries(d)){const w=o.toLowerCase();if(w.includes("dine")||w.includes("restaurant")||w.includes("àª°à«‡àª¸à«àªŸà«‹àª°àª¨à«àªŸ")||w.includes("à¤°à¥‡à¤¸à¥à¤Ÿà¥‹à¤°à¥‡à¤‚à¤Ÿ")||w.includes("àªœàª®àªµà«àª‚")||w.includes("àª–àª¾àªµà«àª‚"))return console.log(`ðŸŽ‰ RESTAURANT MATCH: Command "${o}" matched for transcript "${c}"`),{matched:!0,key:o,action:C,reason:"restaurant keyword"}}if(_)for(const[o,C]of Object.entries(d)){const w=o.toLowerCase();if(w.includes("take")||w.includes("parcel")||w.includes("àªªà«‡àª•à«‡àªŸ")||w.includes("à¤ªà¥ˆà¤•à¥‡à¤Ÿ")||w.includes("àªªàª¾àª°à«àª¸àª²")||w.includes("àª²à«‡àªµàª¾"))return console.log(`ðŸŽ‰ TAKEAWAY MATCH: Command "${o}" matched for transcript "${c}"`),{matched:!0,key:o,action:C,reason:"takeaway keyword"}}for(const[o,C]of Object.entries(d))if(c.includes(o.toLowerCase())||o.toLowerCase().includes(c))return console.log(`ðŸŽ‰ EXACT MATCH: Command "${o}" matched for transcript "${c}"`),{matched:!0,key:o,action:C,reason:"exact match"}}return{matched:!1}},l=(T,d,L="en")=>{if(console.log("ðŸ”Š readAloudWithPrompt called with texts:",T,"language:",L),!window.speechSynthesis){console.error("âŒ Speech Synthesis not supported"),d&&d();return}M(),window.speechSynthesis.cancel();const n={en:"Now please say your choice",hi:"à¤…à¤¬ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¤¾ à¤µà¤¿à¤•à¤²à¥à¤ª à¤¬à¥‹à¤²à¥‡à¤‚",mr:"à¤†à¤¤à¤¾ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¤à¥à¤®à¤šà¤¾ à¤ªà¤°à¥à¤¯à¤¾à¤¯ à¤®à¥à¤¹à¤£à¤¾",gu:"àª¹àªµà«‡ àª•à«ƒàªªàª¾ àª•àª°à«€àª¨à«‡ àª¤àª®àª¾àª°à«‹ àªµàª¿àª•àª²à«àªª àª•àª¹à«‹"},c=[...T,n[L]||n.en];setTimeout(()=>{const y=N[L]||N.en;let _=0;const o=()=>{if(_>=c.length){console.log("âœ… All texts completed including choice prompt"),d&&setTimeout(d,100);return}const C=c[_];console.log(`ðŸ”Š Speaking text ${_+1}/${c.length}: "${C}"`);const w=new SpeechSynthesisUtterance(C);w.volume=1,w.rate=L==="mr"||L==="gu"?.8:.9,w.pitch=1,w.lang=y.speechLang;const ae=O(L);ae&&(w.voice=ae),w.onstart=()=>{console.log(`âœ… Started speaking: "${C}" in ${L}`)},w.onend=()=>{console.log(`âœ… Finished speaking: "${C}"`),_++,setTimeout(o,200)},w.onerror=ee=>{console.error(`âŒ Speech error for "${C}":`,ee),_++,setTimeout(o,100)};try{window.speechSynthesis.speak(w)}catch(ee){console.error("âŒ Failed to speak:",ee),_++,setTimeout(o,100)}};o()},100)},E=(T,d,L="en")=>{if(console.log("ðŸ”Š readAloud (simple) called with texts:",T,"language:",L),!window.speechSynthesis){console.error("âŒ Speech Synthesis not supported"),d&&d();return}M(),window.speechSynthesis.cancel(),setTimeout(()=>{const n=N[L]||N.en;let c=0;const y=()=>{if(c>=T.length){console.log("âœ… Simple speech completed"),d&&setTimeout(d,100);return}const _=T[c];console.log(`ðŸ”Š Speaking simple text ${c+1}/${T.length}: "${_}"`);const o=new SpeechSynthesisUtterance(_);o.volume=1,o.rate=L==="mr"||L==="gu"?.8:.9,o.pitch=1,o.lang=n.speechLang;const C=O(L);C&&(o.voice=C),o.onstart=()=>{console.log(`âœ… Started speaking simple: "${_}" in ${L}`)},o.onend=()=>{console.log(`âœ… Finished speaking simple: "${_}"`),c++,setTimeout(y,800)},o.onerror=w=>{console.error(`âŒ Speech error for "${_}":`,w),c++,setTimeout(y,500)};try{window.speechSynthesis.speak(o)}catch(w){console.error("âŒ Failed to speak:",w),c++,setTimeout(y,500)}};y()},100)};return{readAloud:l,readAloudSimple:E,startListening:(T={},d="en")=>{if(!("webkitSpeechRecognition"in window)){console.error("Speech Recognition not supported");return}const L=N[d]||N.en;if(console.log(`ðŸŽ¤ Starting recognition for language: ${d}`),S.current)d==="gu"?S.current.lang="gu-IN":S.current.lang=L.recognitionLang;else{const n=new window.webkitSpeechRecognition;d==="gu"?(n.lang="gu-IN",console.log("ðŸ‡¬ðŸ‡º Using Gujarati recognition (gu-IN)")):n.lang=L.recognitionLang,n.continuous=!1,n.interimResults=!1,n.maxAlternatives=5,n.onresult=c=>{const y=[];for(let o=0;o<c.results[0].length;o++)y.push(c.results[0][o].transcript.toLowerCase().trim());console.log("ðŸŽ¯ Voice recognition results:",y);const _=D(y,T,d);if(_.matched){if(console.log(`ðŸŽ‰ SUCCESS: Matched "${_.key}" via ${_.reason}`),typeof _.action=="function"){const C={en:`${_.key} selected`,hi:`${_.key} à¤šà¥à¤¨à¤¾ à¤—à¤¯à¤¾`,mr:`${_.key} à¤¨à¤¿à¤µà¤¡à¤²à¥‡`,gu:`${_.key} àªªàª¸àª‚àª¦ àª•àª°à«àª¯à«àª‚`}[d]||_.key;E([C],()=>{_.action()},d)}}else{console.log("âŒ No match found for any transcript:",y);const o={en:["I didn't understand. Please try again."],hi:["à¤¸à¤®à¤ à¤¨à¤¹à¥€à¤‚ à¤†à¤¯à¤¾à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤•à¤¹à¥‡à¤‚à¥¤"],mr:["à¤¸à¤®à¤œà¤²à¥‡ à¤¨à¤¾à¤¹à¥€. à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥à¤¨à¥à¤¹à¤¾ à¤®à¥à¤¹à¤£à¤¾."],gu:["àª¸àª®àªœàª¾àª¯à«àª‚ àª¨àª¹à«€àª‚. àª•à«ƒàªªàª¾ àª•àª°à«€àª¨à«‡ àª«àª°à«€àª¥à«€ àª•àª¹à«‹."]},C=o[d]||o.en;E(C,()=>{setTimeout(()=>{if(S.current)try{S.current.start()}catch(w){console.error("Failed to restart recognition:",w)}},1e3)},d)}},n.onerror=c=>{if(console.error("âŒ Recognition error:",c.error),d==="gu"&&n.lang==="gu-IN"){console.log("ðŸ”„ Gujarati recognition failed, falling back to Hindi"),n.lang="hi-IN",setTimeout(()=>{try{n.start()}catch(o){console.error("Fallback recognition failed:",o)}},500);return}const y={en:"Voice recognition failed. Please try again.",hi:"à¤†à¤µà¤¾à¤œà¤¼ à¤•à¥€ à¤ªà¤¹à¤šà¤¾à¤¨ à¤¨à¤¹à¥€à¤‚ à¤¹à¥à¤ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤•à¥‹à¤¶à¤¿à¤¶ à¤•à¤°à¥‡à¤‚à¥¤",mr:"à¤†à¤µà¤¾à¤œ à¤“à¤³à¤–à¤¤à¤¾ à¤†à¤²à¥€ à¤¨à¤¾à¤¹à¥€. à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥à¤¨à¥à¤¹à¤¾ à¤ªà¥à¤°à¤¯à¤¤à¥à¤¨ à¤•à¤°à¤¾.",gu:"àª…àªµàª¾àªœ àª“àª³àª–à«€ àª¶àª•àª¾àª¯à«‹ àª¨àª¥à«€. àª•à«ƒàªªàª¾ àª•àª°à«€àª¨à«‡ àª«àª°à«€ àªªà«àª°àª¯àª¾àª¸ àª•àª°à«‹."},_=y[d]||y.en;E([_],null,d)},n.onend=()=>{console.log("ðŸ”š Voice recognition ended")},S.current=n}try{S.current.start()}catch(n){console.error("âŒ Failed to start recognition:",n)}},stopListening:()=>{S.current&&S.current.stop()}}}const ct=({selectedType:S,onTypeChange:V,customerLocation:N,onLocationChange:M,selectedCart:O,onCartChange:R,nearbyCarts:D=[],loading:l=!1,texts:E={}})=>{const[v,$]=u.useState(null),[T,d]=u.useState(""),[L,n]=u.useState(!1),c=a=>typeof a?.cartAdminId?.cartName=="string"&&a.cartAdminId.cartName.trim()||typeof a?.name=="string"&&a.name.trim()||typeof a?.cartAdminId?.cafeName=="string"&&a.cartAdminId.cafeName.trim()||typeof a?.cartAdminId?.name=="string"&&a.cartAdminId.name.trim()||"Store",y=a=>{if(!a)return null;if(typeof a.address=="string"&&a.address.trim())return a.address.trim();if(a.address&&typeof a.address=="object"){if(typeof a.address.fullAddress=="string"&&a.address.fullAddress.trim())return a.address.fullAddress.trim();const P=[a.address.street,a.address.city,a.address.state,a.address.zipCode].filter(m=>typeof m=="string"&&m.trim()).join(", ");if(P)return P}return typeof a.location=="string"&&a.location.trim()?a.location.trim():null},_=a=>{if(!a?.deliveryInfo)return null;const P=[];return typeof a.deliveryInfo.deliveryCharge=="number"&&P.push(`Delivery: Rs.${a.deliveryInfo.deliveryCharge}`),typeof a.deliveryInfo.estimatedTime=="number"&&P.push(`${Math.round(a.deliveryInfo.estimatedTime)} min`),typeof a.deliveryInfo.distance=="number"&&P.push(`${a.deliveryInfo.distance.toFixed(2)} km`),P.length?P.join(" - "):null},o=a=>typeof a?.pickupEnabled=="boolean"?a.pickupEnabled:typeof a?.canPickup=="boolean"?a.canPickup:!0,C=a=>typeof a?.canDeliver=="boolean"?a.canDeliver:typeof a?.deliveryEnabled=="boolean"?a.deliveryEnabled:!0,w=typeof N?.latitude=="number"&&typeof N?.longitude=="number",ae=!!(N?.address?.trim()||T.trim()),ee=S==="DELIVERY"&&(w||ae),G=D.filter(C),ce=D.filter(o),ye=async(a,P)=>{try{n(!0);const m=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${a}&lon=${P}&addressdetails=1`,{headers:{"User-Agent":"TerraCart-Ordering-System"}});if(!m.ok)throw new Error("Failed to fetch address");const Y=await m.json();if(Y&&Y.address){const x=Y.address,U=[];if(x.building)U.push(x.building);else if(x.house_name)U.push(x.house_name);else if(x.house_number){const fe=x.house_number.trim();fe&&U.push(fe)}x.road&&U.push(x.road),x.city?U.push(x.city):x.town?U.push(x.town):x.village&&U.push(x.village),x.state?x.postcode?U.push(`${x.state} - ${x.postcode}`):U.push(x.state):x.postcode&&U.push(x.postcode);let H=U.join(", ");return(!H||H.trim().length===0)&&(H=Y.display_name||"Address not available"),H}return Y.display_name||"Address not available"}catch(m){return console.error("Reverse geocoding error:",m),null}finally{n(!1)}},de=async()=>{if(!navigator.geolocation){$("Geolocation is not supported by your browser");return}$(null),n(!0),navigator.geolocation.getCurrentPosition(async a=>{const P=a.coords.latitude,m=a.coords.longitude,Y=await ye(P,m),x={latitude:P,longitude:m,address:Y||T||"Location coordinates captured"};Y&&d(Y),M(x)},a=>{$("Unable to get your location. Please enter manually."),n(!1),console.error("Geolocation error:",a)})};return u.useEffect(()=>{const a=N?.address||"";d(P=>P===a?P:a)},[N?.address]),e.jsxs("div",{className:"order-type-selector",children:[e.jsx("h3",{className:"order-type-selector-title",children:E.title||"Choose Order Type"}),e.jsxs("div",{className:"order-type-options-grid",children:[e.jsxs("label",{className:`order-type-option-card ${S==="PICKUP"?"active":""}`,children:[e.jsx("input",{type:"radio",name:"orderType",value:"PICKUP",checked:S==="PICKUP",onChange:()=>V("PICKUP"),className:"hidden"}),e.jsx(Qe,{className:"order-type-option-icon"}),e.jsx("div",{className:"order-type-option-title",children:E.pickupOption||"Pickup"}),e.jsx("div",{className:"order-type-option-desc",children:E.pickupDesc||"Order and collect from store"})]}),e.jsxs("label",{className:`order-type-option-card ${S==="DELIVERY"?"active":""}`,children:[e.jsx("input",{type:"radio",name:"orderType",value:"DELIVERY",checked:S==="DELIVERY",onChange:()=>V("DELIVERY"),className:"hidden"}),e.jsx(Ge,{className:"order-type-option-icon"}),e.jsx("div",{className:"order-type-option-title",children:E.deliveryOption||"Delivery"}),e.jsx("div",{className:"order-type-option-desc",children:E.deliveryDesc||"Get your order delivered"})]})]}),(S==="PICKUP"||S==="DELIVERY")&&e.jsxs("div",{className:"location-section",children:[e.jsxs("h4",{className:"section-title",children:[e.jsx(He,{className:"section-title-icon"}),"Your Location"]}),e.jsxs("div",{className:"location-fields",children:[e.jsx("button",{type:"button",onClick:de,className:"btn-location",disabled:L,children:L?"Fetching location...":"Use Current Location"}),e.jsx("input",{type:"text",placeholder:"Enter your address or 6-digit pin code",value:T,onChange:a=>{const P=a.target.value;d(P),P.trim()?M({address:P}):M(null)},className:"input-field"}),e.jsx("p",{className:"helper-text",children:"Tip: You can enter only your 6-digit pin code for faster location detection."}),v&&e.jsx("p",{className:"status-message status-danger",children:v}),N&&e.jsxs("div",{className:"location-info",children:[e.jsx("p",{className:"location-info-title",children:"Your Location"}),e.jsx("p",{className:"location-info-text",children:N.address||"Location set"}),N.latitude&&N.longitude&&e.jsxs("p",{className:"location-info-coordinates",children:["Coordinates: ",N.latitude.toFixed(6),","," ",N.longitude.toFixed(6)]})]})]})]}),ee&&e.jsxs("div",{className:"nearby-carts-section",children:[e.jsx("h4",{className:"section-title",children:"Available Stores"}),l?e.jsx("p",{className:"status-message status-neutral",children:"Loading nearby stores..."}):G.length===0?e.jsxs("div",{className:"status-message status-danger",children:[e.jsx("p",{className:"status-title",children:"No stores available for delivery in your area"}),e.jsx("p",{className:"status-note",children:"All stores are outside the delivery radius for your location."}),e.jsx("p",{className:"status-note",children:"Try selecting Pickup instead, or enter a different address."})]}):e.jsx("div",{className:"carts-list",children:G.map(a=>{const P=y(a),m=_(a),Y=typeof a?.deliveryInfo?.distance=="number";return e.jsxs("label",{className:`cart-option ${O?._id===a._id?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"cart",value:a._id,checked:O?._id===a._id,onChange:()=>R(a)}),e.jsxs("div",{className:"cart-content",children:[e.jsx("div",{className:"cart-name",children:c(a)}),P&&e.jsx("div",{className:"cart-meta cart-meta-address",children:P}),typeof a.distance=="number"&&!Y&&e.jsxs("div",{className:"cart-meta",children:[a.distance.toFixed(2)," km away"]}),m&&e.jsx("div",{className:"cart-meta cart-meta-success",children:m})]})]},a._id)})})]}),S==="PICKUP"&&N&&e.jsxs("div",{className:"pickup-carts-section",children:[e.jsx("h4",{className:"section-title",children:"Select Store"}),l?e.jsx("p",{className:"status-message status-neutral",children:"Loading stores..."}):ce.length===0?e.jsxs("div",{className:"status-message status-warn",children:[e.jsx("p",{className:"status-title",children:"No stores available"}),e.jsx("p",{className:"status-note",children:"Please ensure:"}),e.jsxs("ul",{className:"status-list",children:[e.jsx("li",{children:"At least one cart exists in the system"}),e.jsx("li",{children:"Carts have pickup enabled"}),e.jsx("li",{children:"Backend server is running"})]})]}):e.jsx("div",{className:"carts-list",children:ce.map(a=>{const P=y(a);return e.jsxs("label",{className:`cart-option ${O?._id===a._id?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"cart",value:a._id,checked:O?._id===a._id,onChange:()=>R(a)}),e.jsxs("div",{className:"cart-content",children:[e.jsx("div",{className:"cart-name",children:c(a)}),P&&e.jsx("div",{className:"cart-meta cart-meta-address",children:P}),typeof a.distance=="number"&&e.jsxs("div",{className:"cart-meta",children:[a.distance.toFixed(2)," km away"]})]})]},a._id)})})]})]})},Ie="https://api.terracart.in".replace(/\/$/,""),Ae=async(S,V,N,M=null)=>{try{let O=`${Ie}/api/carts/nearby?orderType=${N}`;N==="DELIVERY"&&M?O+=`&pinCode=${encodeURIComponent(M)}`:S&&V&&(O+=`&latitude=${S}&longitude=${V}`);const R=await fetch(O);if(!R.ok)throw new Error("Failed to fetch nearby carts");const D=await R.json();return(D.success?D.data:[]).filter(E=>E.cartAdminId!=null&&E.cartAdminId.isActive!==!1)}catch(O){return O?.message==="Failed to fetch"||O?.name==="TypeError"?console.warn("[CartAPI] Cannot reach backend at",Ie,"- is the server running?"):console.error("[CartAPI] Error fetching nearby carts:",O),[]}},dt=async(S=null)=>{try{let V=`${Ie}/api/carts/available`;S&&(V+=`?orderType=${S}`);const N=await fetch(V);if(!N.ok)throw new Error("Failed to fetch available carts");const M=await N.json();return(M.success?M.data:[]).filter(R=>R.cartAdminId!=null&&R.cartAdminId.isActive!==!1)}catch(V){return console.error("[CartAPI] Error fetching available carts:",V),[]}},ut=async(S,V=null,N=null,M=null)=>{try{let O=`${Ie}/api/carts/${S}`;const R=new URLSearchParams;V&&R.append("latitude",V),N&&R.append("longitude",N),M&&R.append("orderType",M),R.toString()&&(O+=`?${R.toString()}`);const D=await fetch(O);if(!D.ok)throw new Error("Failed to fetch cart");const l=await D.json();return l.success?l.data:null}catch(O){return console.error("[CartAPI] Error fetching cart:",O),null}},Q="https://api.terracart.in".replace(/\/$/,"");Q.includes("localhost")&&console.error("[SecondPage] âš ï¸ WARNING: VITE_NODE_API_URL is not set correctly in production!","Current value:","https://api.terracart.in");function le(){console.log("[SecondPage] Clearing old DINE_IN order data due to session change (preserving takeaway data)"),localStorage.removeItem("terra_orderId"),localStorage.removeItem("terra_cart"),localStorage.removeItem("terra_orderStatus"),localStorage.removeItem("terra_orderStatusUpdatedAt"),localStorage.removeItem("terra_previousOrder"),localStorage.removeItem("terra_previousOrderDetail"),localStorage.removeItem("terra_lastPaidOrderId"),localStorage.removeItem("terra_cart_DINE_IN"),localStorage.removeItem("terra_orderId_DINE_IN"),localStorage.removeItem("terra_orderStatus_DINE_IN"),localStorage.removeItem("terra_orderStatusUpdatedAt_DINE_IN")}function It(){const S=Xe(),[V,N]=u.useState(localStorage.getItem("accessibilityMode")==="true"),[M,O]=u.useState(localStorage.getItem("language")||"en");u.useEffect(()=>{const t=()=>{O(localStorage.getItem("language")||"en")};return window.addEventListener("storage",t),window.addEventListener("language-change",t),()=>{window.removeEventListener("storage",t),window.removeEventListener("language-change",t)}},[]);const[R,D]=u.useState(()=>localStorage.getItem("terra_sessionToken")),[l,E]=u.useState(()=>{try{const t=localStorage.getItem("terra_selectedTable");return t?JSON.parse(t):null}catch{return null}}),[v,$]=u.useState(localStorage.getItem("terra_waitToken")),[T,d]=u.useState(null),[L,n]=u.useState(!1),[c,y]=u.useState(!1),[_,o]=u.useState(!1),[C,w]=u.useState(()=>{const t=localStorage.getItem("terra_selectedTable"),s=localStorage.getItem("terra_scanToken");return!t&&!s?"":localStorage.getItem("terra_takeaway_customerName")||""}),[ae,ee]=u.useState(()=>{const t=localStorage.getItem("terra_selectedTable"),s=localStorage.getItem("terra_scanToken");return!t&&!s?"":localStorage.getItem("terra_takeaway_customerMobile")||""}),[G,ce]=u.useState(()=>{const t=localStorage.getItem("terra_selectedTable"),s=localStorage.getItem("terra_scanToken");return!t&&!s?"":localStorage.getItem("terra_takeaway_customerEmail")||""}),[ye,de]=u.useState(!1),[a,P]=u.useState(null),[m,Y]=u.useState(null),[x,U]=u.useState(null),[H,fe]=u.useState([]),[we,Le]=u.useState(!1),[pe,je]=u.useState(""),[De,se]=u.useState(!1),[z,be]=u.useState(""),[B,ve]=u.useState("1"),[ne,$e]=u.useState(()=>localStorage.getItem("terra_takeaway_only")==="true"),me=u.useRef(null),[X,Oe]=u.useState(()=>{const t=localStorage.getItem("terra_takeaway_only")==="true",s=localStorage.getItem("terra_scanToken"),r=localStorage.getItem("terra_selectedTable");return!t&&!s&&!r});u.useEffect(()=>{const t=()=>{const r=localStorage.getItem("terra_takeaway_only")==="true",f=localStorage.getItem("terra_scanToken"),i=localStorage.getItem("terra_selectedTable")||l,h=!!(typeof window<"u"&&new URLSearchParams(window.location.search).get("table"));Oe(!r&&!f&&!i&&!h)};t(),window.addEventListener("storage",t);const s=setInterval(t,100);return()=>{window.removeEventListener("storage",t),clearInterval(s)}},[l]),u.useEffect(()=>{X&&(console.log("[SecondPage] Normal link detected - clearing dine-in order data"),le(),localStorage.removeItem("terra_selectedTable"),localStorage.removeItem("terra_scanToken"),localStorage.removeItem("terra_sessionToken"),localStorage.removeItem("terra_waitToken"),E(null),D(null),$(null))},[X]);const Re=u.useRef(!1),ke=u.useRef(0),Ne=u.useCallback(t=>{if(!Array.isArray(t)||t.length===0){U(null),me.current=null,localStorage.removeItem("terra_selectedCartId");return}U(s=>{let r=t[0];return s?._id&&t.some(i=>String(i?._id)===String(s._id))&&(r=s),me.current=r,r?._id&&localStorage.setItem("terra_selectedCartId",String(r._id)),r})},[]);u.useEffect(()=>{const t=ke.current+1;ke.current=t;const s=()=>t!==ke.current,r=i=>{s()||(fe(i),Ne(i))},f=i=>{s()||Le(i)};if(!a||!m){r([]);return}if(a==="DELIVERY"&&(!m.latitude||!m.longitude)){if(m.address&&m.address.trim()){const i=m.address.trim(),h=/^\d{6}$/.test(i);f(!0),h?(console.log("[SecondPage] Fetching carts by pin code:",i),Ae(null,null,a,i).then(g=>{s()||(r(g),f(!1))}).catch(g=>{console.error("[SecondPage] Error fetching carts by pin code:",g),f(!1),r([])})):Ee(m.address).then(g=>{if(s())return null;if(g){const j={...m,latitude:g.latitude,longitude:g.longitude};return Y(j),Ae(g.latitude,g.longitude,a)}else return f(!1),r([]),Promise.resolve([])}).then(g=>{if(s())return;const j=(g||[]).filter(k=>k.canDeliver);r(j),f(!1)}).catch(g=>{console.error("[SecondPage] Error geocoding or fetching carts:",g),f(!1),r([])})}else r([]);return}f(!0),m.latitude&&m.longitude?Ae(m.latitude,m.longitude,a).then(i=>{if(s())return;const h=a==="DELIVERY"?i.filter(g=>g.canDeliver):i.filter(g=>g.canPickup);r(h),f(!1)}).catch(i=>{console.warn("[SecondPage] Error fetching nearby carts:",i.message||i),r([]),f(!1)}):a==="PICKUP"?dt(a).then(i=>{if(s())return;const h=i.filter(g=>g.canPickup);r(h),f(!1)}).catch(i=>{console.warn("[SecondPage] Error fetching available carts:",i.message||i),r([]),f(!1)}):(r([]),f(!1))},[a,m,Ne]);const Ee=async t=>{try{const s=/^\d{6}$/.test(t.trim());let r=t;s&&(r=`${t}, India`);const f=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r)}&limit=1&countrycodes=in`,{headers:{"User-Agent":"TerraCart-Ordering-System"}});if(!f.ok)throw new Error("Failed to geocode address");const i=await f.json();return i&&i.length>0?{latitude:parseFloat(i[0].lat),longitude:parseFloat(i[0].lon)}:null}catch(s){return console.error("[SecondPage] Geocoding error:",s),null}},We=(t,s,r,f)=>{const h=(r-t)*Math.PI/180,g=(f-s)*Math.PI/180,j=Math.sin(h/2)*Math.sin(h/2)+Math.cos(t*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(g/2)*Math.sin(g/2),k=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return Math.round(6371*k*100)/100},Ve=(t,s,r)=>{if(!t||!t.coordinates?.latitude||!t.coordinates?.longitude)return{available:!1,distance:null,reason:"Cart location not configured"};if(!s||!r)return{available:!1,distance:null,reason:"Customer location not available"};if(!t.deliveryEnabled)return{available:!1,distance:null,reason:"Delivery not enabled for this store"};const f=We(s,r,t.coordinates.latitude,t.coordinates.longitude),i=t.deliveryRadius||5,h=f<=i;return{available:h,distance:f,maxRadius:i,reason:h?null:`You are ${f.toFixed(2)} km away, but maximum delivery radius is ${i} km`}},Me=u.useCallback(t=>{U(t),me.current=t||null,t?._id&&localStorage.setItem("terra_selectedCartId",String(t._id))},[]);u.useEffect(()=>{const t=localStorage.getItem("terra_takeaway_only")==="true";$e(t)},[]),u.useEffect(()=>{const t=localStorage.getItem("terra_scanToken"),s=sessionStorage.getItem("terra_previousScanToken");t?t!==s?(w(""),ee(""),ce(""),localStorage.removeItem("terra_takeaway_customerName"),localStorage.removeItem("terra_takeaway_customerMobile"),localStorage.removeItem("terra_takeaway_customerEmail"),sessionStorage.setItem("terra_previousScanToken",t)):!s&&t&&sessionStorage.setItem("terra_previousScanToken",t):(w(""),ee(""),ce(""),localStorage.removeItem("terra_takeaway_customerName"),localStorage.removeItem("terra_takeaway_customerMobile"),localStorage.removeItem("terra_takeaway_customerEmail"))},[]);const p=t=>it[M]?.[t]||t;lt(),u.useEffect(()=>{if((localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY"){o(!1),n(!1),v&&(localStorage.removeItem("terra_waitToken"),$(null),d(null));return}if(ne){o(!1),n(!1);return}let s=l;if(!s){const k=localStorage.getItem("terra_selectedTable");if(k)try{s=JSON.parse(k)}catch(A){console.warn("[SecondPage] Failed to parse stored table:",A);return}else{o(!1);return}}const r=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),f=localStorage.getItem("terra_orderStatus")||localStorage.getItem("terra_orderStatus_DINE_IN");if(r&&f&&!["Paid","Cancelled","Returned","Completed"].includes(f)){o(!1),n(!1);return}const h=s.status||"AVAILABLE",g=h!=="AVAILABLE";if(o(g),h==="AVAILABLE"){n(!1),v&&(localStorage.removeItem("terra_waitToken"),$(null),d(null)),le(),console.log("[SecondPage] Table is AVAILABLE - cleared all order data for new customer");return}const j=localStorage.getItem("terra_waitToken");g&&!j?n(!0):(h==="AVAILABLE"||j)&&n(!1)},[l,v,ne]),u.useEffect(()=>{if(ne){d(null);return}if(!l||l.status==="AVAILABLE"){v&&(localStorage.removeItem("terra_waitToken"),$(null),d(null));return}if(!v){d(null);return}const t=async()=>{if(l?.status==="AVAILABLE"){localStorage.removeItem("terra_waitToken"),$(null),d(null);return}try{const i=await fetch(`${Q}/api/waitlist/status?token=${v}`);if(i.status===404){localStorage.removeItem("terra_waitToken"),$(null),d(null);return}if(!i.ok)throw new Error("Failed to fetch waitlist status");const h=await i.json();d({...h,position:h.position||h.position===0?h.position:T?.position||1}),h.status==="SEATED"&&h.sessionToken&&(localStorage.setItem("terra_sessionToken",h.sessionToken),D(h.sessionToken),localStorage.removeItem("terra_waitToken"),$(null),d(null))}catch(i){console.error("Waitlist status error",i)}},s=async i=>{const h=l?.id||l?._id;v&&i.tableId&&h&&i.tableId.toString()===h.toString()&&(console.log("[SecondPage] Waitlist updated via socket, refreshing position"),(i.status==="NOTIFIED"||i.status==="SEATED")&&(le(),console.log(`[SecondPage] Waitlist status changed to ${i.status} - cleared all order data for new customer`)),await t())};let r=null;try{r=Pe(Q,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4,autoConnect:!0,forceNew:!1}),r.on("connect",()=>{console.log("[SecondPage] Waitlist socket connected")}),r.on("connect_error",i=>{i.message&&!i.message.includes("xhr poll error")&&console.warn("[SecondPage] Waitlist socket connection error:",i.message)}),r.on("disconnect",i=>{i!=="io client disconnect"&&console.log("[SecondPage] Waitlist socket disconnected:",i)}),r.on("waitlistUpdated",s)}catch(i){console.warn("[SecondPage] Failed to create waitlist socket connection:",i)}t();const f=setInterval(t,15e3);return()=>{clearInterval(f),r&&(r.off("waitlistUpdated",s),r.disconnect())}},[v,l,ne]),u.useEffect(()=>{const t=localStorage.getItem("terra_selectedTable");if(t)try{const s=JSON.parse(t);E(s);const r=localStorage.getItem("terra_sessionToken");r&&D(r);const i=(localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY",h=s.status||"AVAILABLE",g=localStorage.getItem("terra_waitToken");h==="AVAILABLE"?(o(!1),n(!1),g&&(localStorage.removeItem("terra_waitToken"),$(null),d(null)),console.log("[SecondPage] Table is AVAILABLE on mount - hiding waitlist modal")):!i&&h!=="AVAILABLE"&&!g?(console.log("[SecondPage] Table is occupied on mount - showing waitlist modal"),o(!0),n(!0)):i&&(o(!1),n(!1));const j=async()=>{const F=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),I=localStorage.getItem("terra_orderStatus")||localStorage.getItem("terra_orderStatus_DINE_IN");if(F&&I&&!["Paid","Cancelled","Returned","Completed"].includes(I)){console.log("[SecondPage] User has active order - skipping table status refresh");return}const Se=s.qrSlug||localStorage.getItem("terra_scanToken");if(Se)try{const re=new URLSearchParams;r&&re.set("sessionToken",r);const b=`${Q}/api/tables/lookup/${Se}${re.toString()?`?${re.toString()}`:""}`,J=await fetch(b);if(J.status===404){localStorage.removeItem("terra_selectedTable"),localStorage.removeItem("terra_scanToken"),localStorage.removeItem("terra_sessionToken"),E(null),D(null),console.warn("[SecondPage] Table not found (404) - cleared invalid table data");return}if(J.ok){const q=await J.json().catch(()=>({}));if(q?.table){console.log("[SecondPage] Refreshed table status:",q.table.status);const te={...s,...q.table,qrSlug:s.qrSlug||q.table.qrSlug,capacity:q.table.capacity||q.table.originalCapacity||s.capacity||s.originalCapacity||null,originalCapacity:q.table.originalCapacity||s.originalCapacity||null};E(te),localStorage.setItem("terra_selectedTable",JSON.stringify(te));const Z=(localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY",ue=te.status||"AVAILABLE";ue==="AVAILABLE"?(o(!1),n(!1),localStorage.removeItem("terra_waitToken"),$(null),d(null),le(),console.log("[SecondPage] Table is AVAILABLE (from refresh) - cleared all order data and waitlist state")):!Z&&ue!=="AVAILABLE"&&!v?(o(!0),n(!0),console.log("[SecondPage] Table is OCCUPIED (from refresh) - showing waitlist modal")):Z&&(o(!1),n(!1))}}else if(J.status===423){const te=(localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY";let ge={};try{ge=await J.json()}catch(oe){console.warn("[SecondPage] Failed to parse 423 response (expected for occupied tables):",oe)}const Z=ge?.table||s,ue=Z?.status||"OCCUPIED",_e={...Z,capacity:Z.capacity||Z.originalCapacity||s.capacity||s.originalCapacity||null,originalCapacity:Z.originalCapacity||s.originalCapacity||null};if(E(_e),localStorage.setItem("terra_selectedTable",JSON.stringify(_e)),ue==="AVAILABLE")o(!1),n(!1),localStorage.removeItem("terra_waitToken"),$(null),d(null),console.log("[SecondPage] Table is AVAILABLE (despite 423 response) - hiding waitlist modal");else{o(!0);const oe=localStorage.getItem("terra_waitToken");!te&&!oe?(console.log("[SecondPage] Table is locked (423) and OCCUPIED - showing waitlist modal (this is expected behavior)"),n(!0)):te&&(o(!1),n(!1))}}else J.status===404&&(localStorage.removeItem("terra_selectedTable"),localStorage.removeItem("terra_scanToken"),localStorage.removeItem("terra_sessionToken"),E(null),D(null),console.warn("[SecondPage] Table not found (404) during refresh - cleared invalid table data"))}catch(re){console.warn("[SecondPage] Failed to refresh table status:",re);const J=(localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY",q=s.status||"AVAILABLE";q==="AVAILABLE"?(o(!1),n(!1),v&&(localStorage.removeItem("terra_waitToken"),$(null),d(null)),console.log("[SecondPage] Table is AVAILABLE (refresh failed) - hiding waitlist modal")):!J&&q!=="AVAILABLE"&&!v?(o(!0),n(!0)):J&&(o(!1),n(!1))}},k=setTimeout(j,500);let A=null;return A=setInterval(()=>{if(!(typeof window<"u"&&window.__tableStatusSocketConnected||!1)){const I=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),W=localStorage.getItem("terra_orderStatus")||localStorage.getItem("terra_orderStatus_DINE_IN");I&&W&&!["Paid","Cancelled","Returned","Completed"].includes(W)||(console.log("[SecondPage] Socket disconnected - using fallback refresh"),j())}},3e4),typeof window<"u"&&(window.__tableStatusSocketConnected=!1),()=>{clearTimeout(k),A&&clearInterval(A)}}catch{E(null)}},[]),u.useEffect(()=>{if(!l||!l.id&&!l._id)return;const t=r=>{const f=r.id||r._id,i=l?.id||l?._id;if(!f||!i)return;if(String(f)!==String(i))if(r.number&&l?.number){if(String(r.number)!==String(l.number))return}else return;const h=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),g=localStorage.getItem("terra_orderStatus")||localStorage.getItem("terra_orderStatus_DINE_IN");if(h&&g&&!["Paid","Cancelled","Returned","Completed"].includes(g)){console.log("[SecondPage] User has active order - ignoring table status update");return}console.log("[SecondPage] Table status updated via socket:",{newStatus:r.status,previousStatus:l.status,tableId:f,tableNumber:r.number});const k={...l,status:r.status,currentOrder:r.currentOrder||null,sessionToken:r.sessionToken||l.sessionToken,capacity:r.capacity||r.originalCapacity||l.capacity||l.originalCapacity||null,originalCapacity:r.originalCapacity||l.originalCapacity||null};E(k),localStorage.setItem("terra_selectedTable",JSON.stringify(k)),r.status==="AVAILABLE"?(console.log("[SecondPage] Table became AVAILABLE via socket - clearing waitlist state and order data"),o(!1),n(!1),localStorage.removeItem("terra_waitToken"),$(null),d(null),le(),console.log("[SecondPage] Cleared all order data for new customer"),l.status!=="AVAILABLE"&&console.log("[SecondPage] Table status changed to AVAILABLE - user can proceed")):r.status!=="AVAILABLE"&&((localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY"?(o(!1),n(!1)):localStorage.getItem("terra_waitToken")||(o(!0),n(!0),console.log("[SecondPage] Table is OCCUPIED via socket - showing waitlist modal")))};let s=null;try{s=Pe(Q,{transports:["websocket","polling"],reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:5,timeout:6e4,connectTimeout:6e4,autoConnect:!0,forceNew:!1}),s.on("connect",()=>{console.log("[SecondPage] Table status socket connected"),typeof window<"u"&&(window.__tableStatusSocketConnected=!0)}),s.on("connect_error",r=>{r.message&&!r.message.includes("xhr poll error")&&console.warn("[SecondPage] Table status socket connection error:",r.message),typeof window<"u"&&(window.__tableStatusSocketConnected=!1)}),s.on("disconnect",r=>{r!=="io client disconnect"&&console.log("[SecondPage] Table status socket disconnected:",r),typeof window<"u"&&(window.__tableStatusSocketConnected=!1)}),s.on("table:status:updated",t)}catch(r){console.warn("[SecondPage] Failed to create table status socket:",r)}return()=>{s&&(s.off("table:status:updated",t),s.connected&&s.disconnect())}},[l]);const Ce=u.useCallback(async(t="DINE_IN")=>{if(t==="TAKEAWAY"){localStorage.removeItem("terra_waitToken"),$(null),d(null),n(!1),o(!1);const k=localStorage.getItem("terra_orderId_TAKEAWAY")||localStorage.getItem("terra_orderId"),A=localStorage.getItem("terra_orderStatus_TAKEAWAY")||localStorage.getItem("terra_orderStatus"),K=localStorage.getItem("terra_takeaway_sessionToken"),F=A&&!["Cancelled","Returned","Paid","Completed"].includes(A);if(k&&K&&F){localStorage.setItem("terra_serviceType","TAKEAWAY"),S("/menu",{state:{serviceType:"TAKEAWAY"}});return}if(!K){const I=`TAKEAWAY-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("terra_takeaway_sessionToken",I),console.log("[SecondPage] Generated takeaway sessionToken for fresh flow (unified):",I)}de(!0);return}const r=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),f=localStorage.getItem("terra_orderStatus")||localStorage.getItem("terra_orderStatus_DINE_IN");if(r&&f&&!["Paid","Cancelled","Returned","Completed"].includes(f)){console.log("[SecondPage] User has active order - granting immediate access:",r);const k=localStorage.getItem("terra_selectedTable");if(k)try{const A=JSON.parse(k);localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:A}});return}catch{}}const h=localStorage.getItem("terra_selectedTable");if(!h){alert("We couldn't detect your table. Please scan the table QR again or contact staff.");return}const g=JSON.parse(h),j=g.qrSlug||localStorage.getItem("terra_scanToken");if(!j){alert("Missing table reference. Please rescan your QR code.");return}try{const k=new URLSearchParams,A=R||localStorage.getItem("terra_sessionToken");if(A&&k.set("sessionToken",A),v&&g?.status!=="AVAILABLE"&&k.set("waitToken",v),!j||j.trim().length<5){console.error("[SecondPage] Invalid slug:",j),alert("Invalid table QR code. Please scan the table QR code again.");return}const K=`${Q}/api/tables/lookup/${encodeURIComponent(j.trim())}${k.toString()?`?${k.toString()}`:""}`,F=await fetch(K);if(F.status===404){localStorage.removeItem("terra_selectedTable"),localStorage.removeItem("terra_scanToken"),localStorage.removeItem("terra_sessionToken"),E(null),D(null);const b=await F.json().catch(()=>({})),J=b?.message||"Table not found";console.error("[SecondPage] Table lookup 404:",{url:K,slug:j,nodeApi:Q,response:b}),alert(`${J}. The QR code may be invalid or the table may have been removed. Please scan the table QR code again or contact staff for assistance.`);return}const I=await F.json().catch(()=>({}));if(F.status===423){const b=I.table||g;localStorage.setItem("terra_selectedTable",JSON.stringify(b)),E(b),o(!0);const J=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),q=localStorage.getItem("terra_sessionToken"),te=b?.sessionToken,ge=J&&b?.currentOrder&&String(J)===String(b.currentOrder),Z=q&&te&&q===te,ue=I.order&&I.order._id;if(ge||Z||ue){console.log("[SecondPage] Customer has active order/session - allowing access despite 423"),I.sessionToken&&(localStorage.setItem("terra_sessionToken",I.sessionToken),D(I.sessionToken)),I.order&&(localStorage.setItem("terra_orderId",I.order._id),localStorage.setItem("terra_orderId_DINE_IN",I.order._id)),localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:b}});return}if((b?.status||"OCCUPIED")==="AVAILABLE"){localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:b}});return}if(v)try{const oe=await fetch(`${Q}/api/waitlist/status?token=${v}`);if(oe.ok){const ie=await oe.json();if(ie.status==="NOTIFIED"||ie.status==="SEATED"){le(),console.log(`[SecondPage] Waitlist user ${ie.status} (in startDineInFlow) - cleared all order data for new customer`),ie.status==="SEATED"&&ie.sessionToken&&(localStorage.setItem("terra_sessionToken",ie.sessionToken),D(ie.sessionToken),localStorage.removeItem("terra_waitToken"),$(null),d(null)),localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:b}});return}else{if(t==="TAKEAWAY"){o(!1),n(!1);return}o(!0),E(b),localStorage.setItem("terra_selectedTable",JSON.stringify(b)),n(!0);return}}}catch(oe){console.error("Failed to check waitlist status",oe)}o(!0),E(b),localStorage.setItem("terra_selectedTable",JSON.stringify(b)),n(!0);return}if(!F.ok||!I?.table){if(F.status===404){localStorage.removeItem("terra_selectedTable"),localStorage.removeItem("terra_scanToken"),localStorage.removeItem("terra_sessionToken"),E(null),D(null),alert("Table not found. The QR code may be invalid or the table may have been removed. Please scan the table QR code again or contact staff for assistance.");return}throw new Error(I?.message||"Failed to check table status.")}const W=I.table;if((W.status||"AVAILABLE")==="AVAILABLE"){if(localStorage.setItem("terra_selectedTable",JSON.stringify(W)),E(W),o(!1),n(!1),v&&(localStorage.removeItem("terra_waitToken"),$(null),d(null)),I.sessionToken||W.sessionToken){const b=I.sessionToken||W.sessionToken;b&&(localStorage.setItem("terra_sessionToken",b),D(b))}localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:W}});return}if(localStorage.setItem("terra_selectedTable",JSON.stringify(W)),E(W),I.order&&I.order._id){if(console.log("[SecondPage] Backend returned active order - granting access"),I.sessionToken||W.sessionToken){const b=I.sessionToken||W.sessionToken;b&&(localStorage.setItem("terra_sessionToken",b),D(b))}localStorage.setItem("terra_orderId",I.order._id),localStorage.setItem("terra_orderId_DINE_IN",I.order._id),I.order.status&&(localStorage.setItem("terra_orderStatus",I.order.status),localStorage.setItem("terra_orderStatus_DINE_IN",I.order.status)),o(!1),n(!1),localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:W}});return}if(o(!0),I.sessionToken||W.sessionToken){const b=I.sessionToken||W.sessionToken;b&&(localStorage.setItem("terra_sessionToken",b),D(b))}if(v&&I.waitlist?.status==="SEATED"){if(le(),console.log("[SecondPage] Waitlist user SEATED (from table lookup) - cleared all order data for new customer"),I.waitlist.sessionToken){const b=I.waitlist.sessionToken;b&&(localStorage.setItem("terra_sessionToken",b),D(b))}localStorage.removeItem("terra_waitToken"),$(null),d(null),o(!1),n(!1),localStorage.setItem("terra_serviceType",t),S("/menu",{state:{serviceType:t,table:W}});return}if(t==="TAKEAWAY"){o(!1),n(!1);return}o(!0);const re={...W,capacity:W.capacity||W.originalCapacity||l?.capacity||l?.originalCapacity||null,originalCapacity:W.originalCapacity||l?.originalCapacity||null};E(re),localStorage.setItem("terra_selectedTable",JSON.stringify(re)),n(!0)}catch(k){console.error("startServiceFlow error",k),k.message&&k.message.includes("Table not found")?(localStorage.removeItem("terra_selectedTable"),localStorage.removeItem("terra_scanToken"),localStorage.removeItem("terra_sessionToken"),E(null),D(null),alert("Table not found. The QR code may be invalid or the table may have been removed. Please scan the table QR code again or contact staff for assistance.")):alert(`Unable to check table availability: ${k.message||"Unknown error"}. Please try again or contact staff for help.`)}},[S,v,R]),he=u.useCallback(()=>Ce("DINE_IN"),[Ce]),Fe=u.useCallback(()=>{localStorage.removeItem("terra_waitToken"),$(null),d(null),n(!1),o(!1),localStorage.setItem("terra_serviceType","TAKEAWAY"),localStorage.removeItem("terra_takeaway_customerName"),localStorage.removeItem("terra_takeaway_customerMobile"),localStorage.removeItem("terra_takeaway_customerEmail");const t=`TAKEAWAY-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;localStorage.setItem("terra_takeaway_sessionToken",t),localStorage.removeItem("terra_orderId_TAKEAWAY"),localStorage.removeItem("terra_cart_TAKEAWAY"),localStorage.removeItem("terra_orderStatus_TAKEAWAY"),localStorage.removeItem("terra_orderStatusUpdatedAt_TAKEAWAY"),localStorage.removeItem("terra_orderType"),S("/menu",{state:{serviceType:"TAKEAWAY"}})},[S,l]),Ue=u.useCallback(async()=>{const t=`TAKEAWAY-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("[SecondPage] Starting new takeaway session - clearing old order data",{takeawayOnly:localStorage.getItem("terra_takeaway_only"),cartId:localStorage.getItem("terra_takeaway_cartId")}),localStorage.removeItem("terra_orderId_TAKEAWAY"),localStorage.removeItem("terra_cart_TAKEAWAY"),localStorage.removeItem("terra_orderStatus_TAKEAWAY"),localStorage.removeItem("terra_orderStatusUpdatedAt_TAKEAWAY"),localStorage.removeItem("terra_previousOrder"),localStorage.removeItem("terra_previousOrderDetail"),localStorage.removeItem("terra_takeaway_customerName"),localStorage.removeItem("terra_takeaway_customerMobile"),localStorage.removeItem("terra_takeaway_customerEmail"),console.log("[SecondPage] Cleared previous customer data for new takeaway session");const s=C?.trim(),r=ae?.trim();if(!s||!r){alert("Please enter both Name and Mobile Number to continue.");return}if(!/^[a-zA-Z\s]{2,}$/.test(s)){alert("Please enter a valid Name (letters only).");return}if(!/^[0-9]{10}$/.test(r)){alert("Please enter a valid 10-digit Mobile Number.");return}if(G?.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G.trim())){alert("Please enter a valid Email Address.");return}localStorage.setItem("terra_takeaway_customerName",s),localStorage.setItem("terra_takeaway_customerMobile",r),G&&G.trim()?localStorage.setItem("terra_takeaway_customerEmail",G.trim()):localStorage.removeItem("terra_takeaway_customerEmail");const h=a==="PICKUP"||a==="DELIVERY",g=h||X,j=localStorage.getItem("terra_selectedCartId");let k=me.current||x||H.find(A=>String(A?._id||"")===String(j||""))||(H.length===1?H[0]:null);if(!k&&j&&(a==="PICKUP"||a==="DELIVERY"))try{const A=await ut(j,m?.latitude||null,m?.longitude||null,a);A&&A._id&&(k=A,U(A),me.current=A)}catch(A){console.warn("[SecondPage] Unable to restore selected cart before submit:",A)}if(h?localStorage.setItem("terra_orderType",a):localStorage.removeItem("terra_orderType"),g&&m?localStorage.setItem("terra_customerLocation",JSON.stringify(m)):localStorage.removeItem("terra_customerLocation"),g&&k?._id?localStorage.setItem("terra_selectedCartId",String(k._id)):localStorage.removeItem("terra_selectedCartId"),g&&pe&&pe.trim()?localStorage.setItem("terra_specialInstructions",pe.trim()):localStorage.removeItem("terra_specialInstructions"),g&&a==="DELIVERY"){if(!k){alert("Please select a store for delivery.");return}if(!m||!m.address){alert("Please provide your delivery address.");return}let A=m.latitude,K=m.longitude;if(!A||!K){if(!m.address){alert("Please provide a valid delivery address.");return}const I=await Ee(m.address);if(!I){alert("Could not determine the location of your address. Please use 'Use Current Location' or enter a more specific address.");return}A=I.latitude,K=I.longitude}const F=Ve(k,A,K);if(!F.available){F.distance!==null?alert(`âŒ Delivery not available!

${F.reason}

Please select a different store or choose Pickup instead.`):alert(`âŒ Delivery not available!

${F.reason}

Please select a different store or choose Pickup instead.`);return}(m.latitude!==A||m.longitude!==K)&&(Y({...m,latitude:A,longitude:K}),localStorage.setItem("terra_customerLocation",JSON.stringify({...m,latitude:A,longitude:K})))}localStorage.setItem("terra_takeaway_sessionToken",t),a==="PICKUP"?localStorage.setItem("terra_serviceType","PICKUP"):a==="DELIVERY"?localStorage.setItem("terra_serviceType","DELIVERY"):localStorage.setItem("terra_serviceType","TAKEAWAY"),localStorage.removeItem("terra_waitToken"),$(null),d(null),n(!1),o(!1),de(!1),S("/menu",{state:{serviceType:h?a:"TAKEAWAY"}})},[C,ae,G,S,a,x,H,m,X]),xe=u.useCallback(()=>{Re.current=!0,de(!1)},[]),Ye=u.useCallback(()=>{se(!0)},[]),Be=u.useCallback(async()=>{if(!l){alert("We couldn't detect your table. Please ask staff for help."),se(!1);return}if((l.status||"AVAILABLE")==="AVAILABLE"){alert("Table is available. You can proceed directly without waitlist."),se(!1);return}if(!_){alert("Table is not occupied. You can proceed directly."),se(!1);return}const s=l?.id||l?._id;if(!s){alert("We couldn't detect your table. Please ask staff for help."),se(!1);return}if(!z||!z.trim()){alert("Please enter your name to join the waitlist."),y(!1);return}let r=parseInt(B,10);if(!Number.isFinite(r)||r<=0){alert("Please enter a valid number of members (at least 1)."),y(!1);return}const f=l?.capacity||l?.originalCapacity||null;if(f&&r>f){alert(`This table can accommodate a maximum of ${f} members. Please enter ${f} or fewer members.`),y(!1);return}try{y(!0);const i=!!v,h=await fetch(`${Q}/api/waitlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tableId:s,token:v||void 0,sessionToken:i&&(R||localStorage.getItem("terra_sessionToken"))||void 0,name:z.trim(),partySize:r})}),g=await h.json();if(!h.ok)throw new Error(g?.message||"Failed to join waitlist.");localStorage.setItem("terra_waitToken",g.token),$(g.token),d({token:g.token,status:"WAITING",position:g.position||1,name:g.name||z.trim()||null,partySize:g.partySize||r||1}),n(!1),se(!1),be(""),ve("1");const j=g.position||1;g.message==="Already in waitlist"?alert(`You're already in the waitlist. Your position is #${j}.`):alert(`Added to waitlist. Your position is #${j}.`)}catch(i){alert(i.message||"Failed to join waitlist.")}finally{y(!1)}},[l,_,v,z,B,R]),Te=u.useCallback(()=>{se(!1),be(""),ve("1")},[]),Ke=u.useCallback(async()=>{if(!(!v||!await window.confirm(p("waitlistLeaveConfirm")||"Leave the waitlist?")))try{await fetch(`${Q}/api/waitlist/${v}`,{method:"DELETE"})}catch(s){console.error("Failed to cancel waitlist",s)}finally{localStorage.removeItem("terra_waitToken"),$(null),d(null)}},[v,p]),Je=u.useCallback(async()=>{if(v)try{const t=await fetch(`${Q}/api/waitlist/status?token=${v}`);if(t.ok){const s=await t.json();d(s)}}catch(t){console.error("Failed to refresh waitlist",t)}},[v]),qe=t=>{switch((t||"").toUpperCase()){case"WAITING":return p("waitlistStatusWaiting");case"NOTIFIED":return p("waitlistStatusNotified");case"SEATED":return p("waitlistStatusSeated");case"CANCELLED":return p("waitlistStatusCancelled");default:return t||""}},ze=X&&(a==="PICKUP"||a==="DELIVERY");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`main-container ${V?"accessibility-mode":"normal-mode"}`,children:[e.jsx(Ze,{showNavigationTabs:!1}),e.jsx("div",{className:`background-wrapper ${V?"accessibility-background":""}`,style:{backgroundImage:`url(${et})`},children:e.jsx("div",{className:"overlay"})}),e.jsxs("div",{className:`content-wrapper ${X?"order-type-flow":""}`,children:[X&&e.jsxs("div",{className:"order-type-page-section",children:[e.jsx(ct,{selectedType:a,onTypeChange:P,customerLocation:m,onLocationChange:Y,selectedCart:x,onCartChange:Me,nearbyCarts:H,loading:we,texts:{title:p("chooseOrderType"),pickupOption:p("pickupOption"),pickupDesc:p("pickupDesc"),deliveryOption:p("deliveryOption"),deliveryDesc:p("deliveryDesc")}}),e.jsx("button",{type:"button",className:"order-type-continue-btn",onClick:()=>{if(we){alert(p("loadingStores")||"Please wait while stores are loading.");return}if(!a){alert(p("pleaseSelectOrderType")||"Please select Pickup or Delivery.");return}if(!m||!m.address){alert(p("pleaseEnterLocation")||"Please enter your location or use current location.");return}if(a==="DELIVERY"&&(!m.latitude||!m.longitude)&&!(m.address&&/^\d{6}$/.test(m.address.trim()))){alert(p("pleaseUseLocationForDelivery")||"For delivery, please use 'Use Current Location' or enter a 6-digit pin code.");return}if(a==="DELIVERY"&&!x){alert(p("pleaseSelectStore")||"Please select a store for delivery.");return}if(a==="PICKUP"&&!x){alert(p("pleaseSelectStore")||"Please select a store for pickup.");return}de(!0)},disabled:we||!a||!m||!x||a==="DELIVERY"&&(!m.latitude||!m.longitude)&&!/^\d{6}$/.test((m.address||"").trim()),children:p("continueButton")||"Continue"})]}),e.jsxs("div",{className:"buttons-container",children:[(()=>{const t=localStorage.getItem("terra_takeaway_only")==="true",s=localStorage.getItem("terra_scanToken"),r=localStorage.getItem("terra_selectedTable")||l,f=!!(typeof window<"u"&&new URLSearchParams(window.location.search).get("table"));return!ne&&!(!t&&!s&&!r&&!f)})()&&e.jsx("button",{onClick:()=>{const t=localStorage.getItem("terra_orderId")||localStorage.getItem("terra_orderId_DINE_IN"),s=localStorage.getItem("terra_orderStatus")||localStorage.getItem("terra_orderStatus_DINE_IN");if(t&&s&&!["Paid","Cancelled","Returned","Completed"].includes(s)){console.log("[SecondPage] User has active order - granting immediate access via button"),he();return}if(!l){alert("We couldn't detect your table. Please scan the table QR again.");return}const f=l.status||"AVAILABLE";if(f==="AVAILABLE"){he();return}if(f!=="AVAILABLE"&&!v){if((localStorage.getItem("terra_serviceType")||"DINE_IN")==="TAKEAWAY"){o(!1),n(!1);return}o(!0),localStorage.setItem("terra_selectedTable",JSON.stringify(l)),n(!0);return}he()},className:`nav-btn ${V?"nav-btn-accessibility":"nav-btn-normal"}`,children:p("dineIn")}),(()=>{const t=localStorage.getItem("terra_takeaway_only")==="true",s=localStorage.getItem("terra_scanToken"),r=localStorage.getItem("terra_selectedTable")||l,f=!!(typeof window<"u"&&new URLSearchParams(window.location.search).get("table"));return!(!t&&!s&&!r&&!f)})()&&e.jsx("button",{onClick:Fe,className:`nav-btn ${V?"nav-btn-accessibility":"nav-btn-normal"}`,children:p("takeAway")})]}),!ne&&localStorage.getItem("terra_serviceType")!=="TAKEAWAY"&&v&&T&&l?.status!=="AVAILABLE"&&e.jsxs("div",{className:"waitlist-status-card",children:[e.jsx("h3",{className:"waitlist-status-title",children:p("waitlistActiveTitle")}),e.jsxs("p",{className:"waitlist-text",children:[p("waitlistStatusLabel"),":"," ",e.jsx("strong",{children:qe(T.status)})]}),T.position>0&&e.jsx("p",{className:"waitlist-text",children:p("waitlistPosition",{position:T.position})}),e.jsx("p",{className:"waitlist-text",children:p("waitlistInstructions")}),e.jsxs("div",{className:"waitlist-actions",children:[e.jsx("button",{className:"waitlist-primary",onClick:()=>{if(T.status==="WAITING"){alert("Table is currently occupied. Please wait for your turn in the waitlist.");return}he()},disabled:T.status!=="NOTIFIED"&&T.status!=="SEATED",children:p("waitlistReadyButton")}),e.jsx("button",{className:"waitlist-secondary",onClick:Ke,children:p("waitlistCancel")}),e.jsx("button",{className:"waitlist-secondary",onClick:Je,children:p("waitlistRefresh")})]})]}),e.jsx("div",{className:"spacer"})]}),!ne&&localStorage.getItem("terra_serviceType")!=="TAKEAWAY"&&L&&e.jsx("div",{className:"waitlist-modal",children:e.jsxs("div",{className:"waitlist-panel",children:[e.jsx("h3",{className:"waitlist-title",children:p("waitlistTitle")}),e.jsx("p",{className:"waitlist-text",children:p("waitlistDescription")}),e.jsx("p",{className:"waitlist-text",children:p("waitlistDescription")||"This table is currently occupied. Would you like to join the waitlist?"}),e.jsxs("div",{className:"waitlist-actions",children:[e.jsx("button",{className:"waitlist-primary",onClick:Ye,disabled:c,children:p("waitlistJoin")||"Join Waitlist"}),e.jsx("button",{className:"waitlist-secondary",onClick:()=>{n(!1),alert("Table is currently occupied. You must join the waitlist to access Dine In. Please join the waitlist when you're ready.")},children:p("waitlistNotNow")||"Not Now"})]})]})}),De&&e.jsx("div",{className:"customer-info-modal-overlay",onClick:t=>{t.target===t.currentTarget&&Te()},children:e.jsxs("div",{className:"customer-info-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"customer-info-modal-header",children:[e.jsx("h3",{children:"Join Waitlist"}),e.jsx("button",{className:"customer-info-close-btn",onClick:Te,children:"âœ•"})]}),e.jsxs("div",{className:"customer-info-modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",color:"#666",fontSize:"0.9rem"},children:"Please provide your details to join the waitlist:"}),e.jsxs("div",{className:"customer-info-form",children:[e.jsxs("div",{className:"customer-info-field",children:[e.jsx("label",{htmlFor:"waitlistGuestName",children:"Your Name *"}),e.jsx("input",{type:"text",id:"waitlistGuestName",value:z,onChange:t=>be(t.target.value),placeholder:"Enter your name",className:"customer-info-input",required:!0})]}),e.jsxs("div",{className:"customer-info-field",children:[e.jsxs("label",{htmlFor:"waitlistPartySize",children:["Number of Members *",l?.capacity&&e.jsxs("span",{style:{fontSize:"0.85rem",fontWeight:"normal",color:"#666",marginLeft:"8px"},children:["(Max: ",l.capacity,")"]})]}),e.jsx("input",{type:"number",id:"waitlistPartySize",value:B,onChange:t=>{const s=t.target.value;ve(s)},placeholder:"Enter number of members",className:"customer-info-input",min:"1",max:l?.capacity||l?.originalCapacity||void 0,required:!0}),(l?.capacity||l?.originalCapacity)&&e.jsxs("p",{style:{marginTop:"4px",fontSize:"0.75rem",color:"#666"},children:["Available Seats:"," ",e.jsx("strong",{children:l.capacity||l.originalCapacity||"N/A"}),B&&parseInt(B,10)>(l.capacity||l.originalCapacity)&&e.jsxs("span",{style:{display:"block",marginTop:"4px",color:"#ef4444",fontWeight:"500"},children:["âš ï¸ Maximum capacity is"," ",l.capacity||l.originalCapacity," ","members. Please reduce the number of members."]})]})]})]})]}),e.jsxs("div",{className:"customer-info-modal-footer",children:[e.jsx("button",{className:"customer-info-skip-btn",onClick:Te,children:"Cancel"}),e.jsx("button",{className:"customer-info-submit-btn",onClick:Be,disabled:c||!z||!z.trim()||!B||parseInt(B,10)<=0||l?.capacity&&parseInt(B,10)>l.capacity,style:{opacity:c||!z||!z.trim()||!B||parseInt(B,10)<=0||l?.capacity&&parseInt(B,10)>l.capacity?.6:1,cursor:c||!z||!z.trim()||!B||parseInt(B,10)<=0||l?.capacity&&parseInt(B,10)>l.capacity?"not-allowed":"pointer"},children:c?"Joining...":"Join Waitlist"})]})]})}),ye&&e.jsx("div",{className:"customer-info-modal-overlay",onClick:t=>{t.target===t.currentTarget&&!X&&xe()},children:e.jsxs("div",{className:"customer-info-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"customer-info-modal-header",children:[e.jsx("h3",{children:p("customerInfoTitle")||"Customer Information (Required)"}),e.jsx("button",{className:"customer-info-close-btn",onClick:xe,children:"âœ•"})]}),e.jsxs("div",{className:"customer-info-modal-body",children:[e.jsx("p",{style:{marginBottom:"16px",color:"#d97706",fontSize:"0.9rem",fontWeight:"600"},children:X&&a?a==="PICKUP"?p("customerInfoDescPickup")||"Please provide your details for the pickup order. Name and mobile number are required.":p("customerInfoDescDelivery")||"Please provide your details for the delivery order. Name and mobile number are required.":p("customerInfoDescTakeaway")||"Please provide your details for the takeaway order. Name and mobile number are required."}),e.jsxs("div",{className:"customer-info-form",children:[e.jsxs("div",{className:"customer-info-field",children:[e.jsx("label",{htmlFor:"customerName",children:p("nameLabel")||"Name (Required)"}),e.jsx("input",{type:"text",id:"customerName",value:C,onChange:t=>w(t.target.value),placeholder:p("namePlaceholder")||"Enter your name",className:"customer-info-input",required:!0})]}),e.jsxs("div",{className:"customer-info-field",children:[e.jsx("label",{htmlFor:"customerMobile",children:p("mobileLabel")||"Mobile Number (Required)"}),e.jsx("input",{type:"tel",id:"customerMobile",value:ae,onChange:t=>ee(t.target.value),placeholder:p("mobilePlaceholder")||"Enter mobile number",className:"customer-info-input",required:!0})]}),e.jsxs("div",{className:"customer-info-field",children:[e.jsx("label",{htmlFor:"customerEmail",children:p("emailLabel")||"Email (Optional)"}),e.jsx("input",{type:"email",id:"customerEmail",value:G,onChange:t=>ce(t.target.value),placeholder:p("emailPlaceholder")||"Enter email address",className:"customer-info-input"})]}),X&&(a==="PICKUP"||a==="DELIVERY")&&e.jsxs("div",{className:"customer-info-field",children:[e.jsx("label",{htmlFor:"specialInstructions",children:p("specialInstructionsLabel")||"Special Instructions (Optional)"}),e.jsx("textarea",{id:"specialInstructions",value:pe,onChange:t=>je(t.target.value),placeholder:p("specialInstructionsPlaceholder")||"e.g., No onion, Urgent pickup, Leave at door",className:"customer-info-input",rows:3})]})]})]}),e.jsx("div",{className:"customer-info-modal-footer",children:e.jsx("button",{className:"customer-info-submit-btn",onClick:Ue,style:{width:"100%"},children:p("continueButton")||"Continue"})})]})})]}),!ze&&e.jsx(at.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>S("/blind-assistant"),className:"fixed rounded-full shadow-lg bg-orange-500 text-white hover:bg-orange-600 focus:outline-none blind-eye-btn",style:{position:"fixed",bottom:"20px",right:"20px",width:"56px",height:"56px",display:"grid",placeItems:"center",border:"none",cursor:"pointer",boxShadow:"0 6px 18px rgba(0,0,0,0.25)",transition:"transform .2s ease, box-shadow .2s ease, background .2s ease",zIndex:9e3,pointerEvents:"auto"},"aria-label":"Blind Support - Voice Assistant",children:e.jsx("img",{src:tt,alt:"Blind Support",width:"24",height:"24",style:{objectFit:"contain",filter:"brightness(0) invert(1)"}})})]})}export{It as S};
